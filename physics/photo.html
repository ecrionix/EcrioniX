<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6672302762343789"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXZS8C1FLY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XXZS8C1FLY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photoelectric Effect Lab - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Orbitron:wght@500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #020617; color: #f8fafc; overflow: hidden; }
        .tech-font { font-family: 'Orbitron', sans-serif; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }

        .watermark {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 8rem; font-weight: 900; color: rgba(255, 255, 255, 0.03);
            pointer-events: none; user-select: none; z-index: 0;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px;
        }

        /* Tabs */
        .tab-btn {
            @apply px-4 py-2 text-xs font-bold rounded-lg transition-all border border-transparent text-slate-400 uppercase tracking-wider;
        }
        .tab-active {
            @apply bg-indigo-600 text-white border-indigo-500 shadow-lg shadow-indigo-500/30;
        }

        /* Simulation Canvas */
        #sim-canvas {
            background-color: #0f172a;
            border-radius: 12px;
            width: 100%; height: 100%;
        }

        /* Sliders */
        input[type=range] { accent-color: #6366f1; }
        
        .metal-plate { fill: #94a3b8; stroke: #cbd5e1; stroke-width: 2; }
        .photon { fill: none; stroke-width: 2; }
        .electron { fill: #facc15; stroke: #fff; stroke-width: 1; }

        /* Theory Styles */
        .prose h1 { @apply text-3xl font-bold text-white mb-6 tech-font border-b border-slate-800 pb-2; }
        .prose h2 { @apply text-xl font-bold text-indigo-400 mt-8 mb-4 uppercase tracking-wider; }
        .prose p { @apply text-slate-400 mb-4 leading-relaxed; }
        .prose strong { @apply text-white font-semibold; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col relative">

    <div class="watermark">EcrioniX Physics</div>

    <!-- Header -->
    <nav class="border-b border-slate-800 bg-slate-900/80 px-6 py-4 flex justify-between items-center z-20">
        <div>
            <h1 class="text-2xl font-bold text-indigo-400 tech-font uppercase">Photoelectric <span class="text-white">Effect</span></h1>
            <p class="text-[10px] text-slate-500 uppercase tracking-widest font-bold">Quantum Mechanics Simulation</p>
        </div>
        
        <div class="flex bg-slate-950 p-1 rounded-xl border border-slate-800">
            <button onclick="switchView('theory')" id="btn-theory" class="tab-btn tab-active">Theory</button>
            <button onclick="switchView('lab')" id="btn-lab" class="tab-btn">Experiment</button>
        </div>

        <button onclick="window.history.back()" class="group flex items-center text-slate-400 hover:text-white transition bg-slate-800/80 px-4 py-2 rounded-lg border border-slate-700 hover:border-indigo-500">
            <span class="text-xs font-bold uppercase">Exit Lab</span>
        </button>
    </nav>

    <!-- Content Area -->
    <div class="flex-grow relative overflow-hidden">
        
        <!-- THEORY VIEW -->
        <div id="view-theory" class="absolute inset-0 z-10 overflow-y-auto p-8 flex justify-center">
            <div class="max-w-4xl w-full glass-panel p-10 prose">
                <h1>Einstein's Nobel Prize Discovery</h1>
                <p>
                    In 1905, Albert Einstein proposed that light consists of discrete packets of energy called <strong>photons</strong>. This theory explained the Photoelectric Effect, where light shining on a metal surface ejects electrons.
                </p>

                <h2>1. Energy of a Photon</h2>
                <p>The energy ($E$) of a single photon is directly proportional to its frequency ($\nu$).</p>
                <div class="bg-indigo-500/10 border-l-4 border-indigo-500 p-4 my-4">
                    <p class="text-center text-xl text-white">\[ E = h\nu = \frac{hc}{\lambda} \]</p>
                </div>
                <p>Where $h$ is Planck's constant ($6.626 \times 10^{-34} \text{ J}\cdot\text{s}$).</p>

                <h2>2. The Work Function ($\Phi$)</h2>
                <p>
                    Electrons in a metal are bound by energy. To escape, they need a minimum amount of energy called the <strong>Work Function ($\Phi$)</strong>. If the photon's energy ($E$) is less than $\Phi$, no electrons are emitted, regardless of light intensity.
                </p>

                <h2>3. Kinetic Energy Equation</h2>
                <p>If $E > \Phi$, the electron escapes. Any excess energy becomes Kinetic Energy ($K_{max}$).</p>
                <div class="bg-indigo-500/10 border-l-4 border-indigo-500 p-4 my-4">
                    <p class="text-center text-xl text-white">\[ K_{max} = h\nu - \Phi \]</p>
                </div>
                
                <div class="mt-8 text-center">
                    <button onclick="switchView('lab')" class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition">Start Experiment &rarr;</button>
                </div>
            </div>
        </div>

        <!-- LAB VIEW -->
        <div id="view-lab" class="absolute inset-0 z-0 opacity-0 pointer-events-none flex p-6 gap-6">
            
            <!-- Left Controls -->
            <div class="w-80 flex flex-col gap-4">
                <div class="glass-panel p-6">
                    <h2 class="text-indigo-400 font-bold mb-4 uppercase text-[10px] tracking-widest">Light Source</h2>
                    
                    <div class="space-y-6">
                        <!-- Wavelength -->
                        <div>
                            <div class="flex justify-between text-xs mb-2">
                                <span class="text-slate-300">Wavelength ($\lambda$)</span>
                                <span id="val-lambda" class="font-mono text-white font-bold">400 nm</span>
                            </div>
                            <input type="range" id="slider-lambda" min="200" max="800" value="400" class="w-full">
                            <div class="h-2 w-full mt-2 rounded-full" id="color-bar" style="background: linear-gradient(to right, #5e1680, #00f, #0f0, #ff0, #f00);"></div>
                        </div>

                        <!-- Intensity -->
                        <div>
                            <div class="flex justify-between text-xs mb-2">
                                <span class="text-slate-300">Intensity</span>
                                <span id="val-intensity" class="font-mono text-white font-bold">50%</span>
                            </div>
                            <input type="range" id="slider-intensity" min="0" max="100" value="50" class="w-full">
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-6">
                    <h2 class="text-indigo-400 font-bold mb-4 uppercase text-[10px] tracking-widest">Target Material</h2>
                    <select id="select-metal" class="w-full bg-slate-900 border border-slate-700 text-white text-xs rounded p-2 mb-4">
                        <option value="2.3">Sodium (Na) - 2.3 eV</option>
                        <option value="4.3">Zinc (Zn) - 4.3 eV</option>
                        <option value="4.7">Copper (Cu) - 4.7 eV</option>
                        <option value="6.35">Platinum (Pt) - 6.35 eV</option>
                        <option value="2.0">Cesium (Cs) - 2.1 eV</option>
                    </select>
                    
                    <div class="bg-slate-900/50 p-3 rounded border border-slate-700">
                        <div class="text-[10px] text-slate-500 uppercase">Work Function ($\Phi$)</div>
                        <div id="val-phi" class="text-xl font-bold text-white mono-font">2.30 eV</div>
                    </div>
                </div>

                <div class="glass-panel p-6 flex-grow flex flex-col">
                    <h2 class="text-emerald-400 font-bold mb-4 uppercase text-[10px] tracking-widest">Meters</h2>
                    <div class="space-y-3">
                        <div class="bg-black/40 p-3 rounded border border-slate-800 flex justify-between items-center">
                            <span class="text-xs text-slate-400">Photon Energy</span>
                            <span id="val-ep" class="text-yellow-400 font-bold mono-font">3.10 eV</span>
                        </div>
                        <div class="bg-black/40 p-3 rounded border border-slate-800 flex justify-between items-center">
                            <span class="text-xs text-slate-400">Max KE</span>
                            <span id="val-ke" class="text-emerald-400 font-bold mono-font">0.80 eV</span>
                        </div>
                        <div class="bg-black/40 p-3 rounded border border-slate-800 flex justify-between items-center">
                            <span class="text-xs text-slate-400">Velocity</span>
                            <span id="val-vel" class="text-blue-400 font-bold mono-font">5.3 × 10⁵ m/s</span>
                        </div>
                    </div>
                    
                    <!-- Retarding Potential -->
                    <div class="mt-auto pt-4 border-t border-slate-700">
                        <div class="flex justify-between text-xs mb-2">
                            <span class="text-slate-300">Battery Voltage (V)</span>
                            <span id="val-voltage" class="font-mono text-white font-bold">0.0 V</span>
                        </div>
                        <input type="range" id="slider-voltage" min="-5" max="5" step="0.1" value="0" class="w-full">
                        <div class="text-[9px] text-slate-500 mt-1 text-center">Use negative voltage to stop electrons</div>
                    </div>
                </div>
            </div>

            <!-- Main Canvas Area -->
            <div class="flex-grow flex flex-col gap-6">
                <!-- Experiment View -->
                <div class="glass-panel p-1 relative flex-grow overflow-hidden">
                     <canvas id="sim-canvas"></canvas>
                     <div class="absolute bottom-4 left-4 text-[10px] text-slate-500 font-bold uppercase tracking-widest bg-black/50 px-2 py-1 rounded">Vacuum Chamber</div>
                </div>

                <!-- Graph -->
                <div class="glass-panel p-4 h-64">
                    <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2">KE vs Frequency Plot</h2>
                    <div class="w-full h-full bg-black/20 rounded relative">
                        <canvas id="graph-canvas"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- Constants ---
        const PLANCK = 4.1357e-15; // Planck's constant in eV*s
        const SPEED_C = 3e8; // Speed of light m/s
        const MASS_E = 9.11e-31; // Electron mass kg
        const CHARGE_E = 1.602e-19; // Elementary charge

        // --- State ---
        let wavelength = 400; // nm
        let intensity = 50; // %
        let workFunction = 2.3; // eV
        let voltage = 0; // V

        let photons = [];
        let electrons = [];
        let current = 0;
        
        // Canvas
        const cvs = document.getElementById('sim-canvas');
        const ctx = cvs.getContext('2d');
        const graphCvs = document.getElementById('graph-canvas');
        const gCtx = graphCvs.getContext('2d');

        // UI Elements
        const slLambda = document.getElementById('slider-lambda');
        const slInt = document.getElementById('slider-intensity');
        const slVolt = document.getElementById('slider-voltage');
        const selMetal = document.getElementById('select-metal');

        // --- View Switching ---
        function switchView(v) {
            const theory = document.getElementById('view-theory');
            const lab = document.getElementById('view-lab');
            const btnT = document.getElementById('btn-theory');
            const btnL = document.getElementById('btn-lab');

            if (v === 'theory') {
                theory.classList.remove('opacity-0', 'pointer-events-none'); theory.classList.add('z-10');
                lab.classList.add('opacity-0', 'pointer-events-none'); lab.classList.remove('z-10');
                btnT.classList.add('tab-active'); btnL.classList.remove('tab-active');
            } else {
                lab.classList.remove('opacity-0', 'pointer-events-none'); lab.classList.add('z-10');
                theory.classList.add('opacity-0', 'pointer-events-none'); theory.classList.remove('z-10');
                btnL.classList.add('tab-active'); btnT.classList.remove('tab-active');
                resize();
            }
        }

        // --- Simulation Logic ---
        function updatePhysics() {
            // Inputs
            wavelength = parseInt(slLambda.value);
            intensity = parseInt(slInt.value);
            voltage = parseFloat(slVolt.value);
            workFunction = parseFloat(selMetal.value);

            // Calculations
            // E = hc / lambda. (Use 1240 eV nm for shortcut)
            const photonEnergy = 1240 / wavelength; 
            const maxKE = photonEnergy - workFunction;
            
            // Stopping Potential check: if V_stopping > KE/e, electrons turn back
            // External voltage V. If V is negative, it repels electrons.
            // Effective KE after voltage field = Initial KE + qV (V is retarding if negative)
            // Actually, KE_final = KE_initial + e*V. If V is negative, KE decreases.

            // UI Updates
            document.getElementById('val-lambda').innerText = wavelength + " nm";
            document.getElementById('val-lambda').style.color = wavelengthToColor(wavelength);
            document.getElementById('val-intensity').innerText = intensity + "%";
            document.getElementById('val-phi').innerText = workFunction.toFixed(2) + " eV";
            document.getElementById('val-ep').innerText = photonEnergy.toFixed(2) + " eV";
            document.getElementById('val-voltage').innerText = voltage.toFixed(1) + " V";

            if (maxKE > 0) {
                document.getElementById('val-ke').innerText = maxKE.toFixed(2) + " eV";
                // v = sqrt(2K/m)
                const keJoules = maxKE * CHARGE_E;
                const v = Math.sqrt(2 * keJoules / MASS_E);
                document.getElementById('val-vel').innerText = (v/1e5).toFixed(2) + " × 10⁵ m/s";
            } else {
                document.getElementById('val-ke').innerText = "0.00 eV";
                document.getElementById('val-vel').innerText = "0 m/s";
            }

            // Spawn Photons
            if (Math.random() < intensity / 200) {
                photons.push({
                    x: 50, y: 50 + Math.random() * (cvs.height - 100),
                    vx: 10, vy: 0, // Light speed in sim
                    color: wavelengthToColor(wavelength),
                    energy: photonEnergy
                });
            }
        }

        function updateEntities() {
            // Move Photons
            for (let i = photons.length - 1; i >= 0; i--) {
                let p = photons[i];
                p.x += p.vx;
                p.y += p.vy;

                // Hit Metal Plate (at x=200)
                if (p.x >= 200) {
                    // Check for emission
                    if (p.energy > workFunction) {
                        const ke = p.energy - workFunction;
                        // Spawn Electron
                        electrons.push({
                            x: 200, y: p.y,
                            vx: Math.sqrt(ke) * 2, // Visual speed scaling
                            vy: (Math.random() - 0.5) * 1,
                            ke: ke,
                            color: '#facc15'
                        });
                    }
                    photons.splice(i, 1);
                }
            }

            // Move Electrons
            for (let i = electrons.length - 1; i >= 0; i--) {
                let e = electrons[i];
                
                // Apply Voltage Field (Retarding Potential)
                // Force F = qE. a = F/m. 
                // Simplified: Acceleration proportional to Voltage
                // If V is negative (retarding), ax is negative.
                const ax = voltage * 0.1; 
                e.vx += ax;

                e.x += e.vx;
                e.y += e.vy;

                // Hit Collector (x=600)
                if (e.x >= cvs.width - 50) {
                    current++; // Count for ammeter (not implemented visually yet)
                    electrons.splice(i, 1);
                }
                // Turned back or hit plate
                else if (e.x <= 200 || e.x < 0) {
                    electrons.splice(i, 1);
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, cvs.width, cvs.height);

            // Draw Plates
            // Emitter (Metal)
            ctx.fillStyle = '#64748b';
            ctx.fillRect(190, 50, 10, cvs.height - 100);
            ctx.fillStyle = '#94a3b8'; // Face
            ctx.fillRect(200, 50, 5, cvs.height - 100);
            
            // Collector
            ctx.fillStyle = '#64748b';
            ctx.fillRect(cvs.width - 60, 50, 10, cvs.height - 100);

            // Draw Photons (Wavy lines)
            ctx.lineWidth = 2;
            photons.forEach(p => {
                ctx.strokeStyle = p.color;
                ctx.beginPath();
                // Simple sine wave segment
                for(let k=0; k<20; k++) {
                    const px = p.x - k*2;
                    const py = p.y + Math.sin((p.x - k*5)*0.5) * 5;
                    if(k===0) ctx.moveTo(px, py); else ctx.lineTo(px, py);
                }
                ctx.stroke();
            });

            // Draw Electrons (Dots)
            ctx.fillStyle = '#facc15';
            electrons.forEach(e => {
                ctx.beginPath();
                ctx.arc(e.x, e.y, 3, 0, Math.PI*2);
                ctx.fill();
            });
        }

        // --- Graphing ---
        function drawGraph() {
            // Plot KE (y) vs Freq (x)
            const w = graphCvs.width;
            const graphHeight = graphCvs.height;
            gCtx.clearRect(0,0,w,graphHeight);

            // Axes
            gCtx.strokeStyle = '#475569';
            gCtx.lineWidth = 1;
            gCtx.beginPath();
            gCtx.moveTo(40, graphHeight-30); gCtx.lineTo(w, graphHeight-30); // X (Freq)
            gCtx.moveTo(40, graphHeight-30); gCtx.lineTo(40, 0); // Y (KE)
            gCtx.stroke();
            
            // Labels
            gCtx.fillStyle = '#94a3b8';
            gCtx.font = '10px monospace';
            gCtx.fillText("Freq (Hz)", w-50, graphHeight-10);
            gCtx.fillText("KE (eV)", 5, 20);

            // Theoretical Line: K = h*f - Phi
            // y = mx + c
            // Start plotting from Threshold Frequency (f0 = Phi/h)
            
            gCtx.strokeStyle = '#6366f1';
            gCtx.lineWidth = 2;
            gCtx.beginPath();
            
            const scaleX = w / 1.5; // Arbitrary scale factor
            const scaleY = graphHeight / 5;   // 5eV max
            
            // Draw line for current metal
            // Work function is y-intercept (negative).
            // x-intercept is Phi.
            
            // Visual approximation for the graph
            const startX = (workFunction / 5) * w; // Threshold freq mapped to x
            gCtx.moveTo(startX, graphHeight-30);
            gCtx.lineTo(w, graphHeight-30 - ((5 - workFunction)*scaleY) ); // Slope up
            gCtx.stroke();
            
            // Current Operating Point
            const currentE = 1240 / wavelength;
            if (currentE > workFunction) {
                const px = (currentE / 5) * w; // Rough mapping of Energy to X pos (since E ~ f)
                const py = graphHeight-30 - ((currentE - workFunction) * scaleY);
                
                gCtx.fillStyle = '#facc15';
                gCtx.beginPath();
                gCtx.arc(px, py, 4, 0, Math.PI*2);
                gCtx.fill();
            }
        }

        // --- Utils ---
        function wavelengthToColor(wavelength) {
            let R, G, B, alpha;
            if (wavelength >= 380 && wavelength < 440) {
                R = -1 * (wavelength - 440) / (440 - 380); G = 0; B = 1;
            } else if (wavelength >= 440 && wavelength < 490) {
                R = 0; G = (wavelength - 440) / (490 - 440); B = 1;
            } else if (wavelength >= 490 && wavelength < 510) {
                R = 0; G = 1; B = -1 * (wavelength - 510) / (510 - 490);
            } else if (wavelength >= 510 && wavelength < 580) {
                R = (wavelength - 510) / (580 - 510); G = 1; B = 0;
            } else if (wavelength >= 580 && wavelength < 645) {
                R = 1; G = -1 * (wavelength - 645) / (645 - 580); B = 0;
            } else if (wavelength >= 645 && wavelength <= 780) {
                R = 1; G = 0; B = 0;
            } else {
                R = 0; G = 0; B = 0;
            }
            return "rgb(" + (R * 255) + "," + (G * 255) + "," + (B * 255) + ")";
        }

        function resize() {
            const container = document.getElementById('sim-canvas').parentElement;
            cvs.width = container.clientWidth;
            cvs.height = container.clientHeight;
            
            const gContainer = document.getElementById('graph-canvas').parentElement;
            graphCvs.width = gContainer.clientWidth;
            graphCvs.height = gContainer.clientHeight;
        }

        window.addEventListener('resize', resize);
        resize();

        function loop() {
            updatePhysics();
            updateEntities();
            draw();
            drawGraph();
            requestAnimationFrame(loop);
        }
        loop();

    </script>
</body>
</html>
