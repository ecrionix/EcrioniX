<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Power of Exponential Sharing - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #020617; color: #f8fafc; overflow: hidden; }
        .brand-font { font-family: 'Orbitron', sans-serif; }

        /* Canvas */
        #network-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
        }

        /* Overlay UI */
        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        /* Pulse Animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1.3); opacity: 0; }
        }
        .pulse-ring::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            border: 2px solid #6366f1;
            animation: pulse-ring 2s infinite;
        }

        /* Counters */
        .counter-val {
            font-family: 'Orbitron', sans-serif;
            background: -webkit-linear-gradient(#22d3ee, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Flow Chart Nodes */
        .flow-node {
            width: 60px; height: 60px;
            display: flex; flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: absolute;
            z-index: 10;
        }
        .flow-node svg {
            width: 40px; height: 40px;
            fill: currentColor;
        }
        .flow-node.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        
        /* Connector Paths */
        .connector-path {
            fill: none;
            stroke: #6366f1;
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            transition: stroke-dashoffset 0.8s ease-out;
        }
        .connector-path.draw { stroke-dashoffset: 0; }
        
        .label-text {
            position: absolute;
            width: 120px;
            text-align: center;
            font-size: 13px;
            color: #94a3b8;
            opacity: 0;
            transition: opacity 0.5s;
            transform: translateX(-50%);
            font-weight: 600;
        }
        .label-text.visible { opacity: 1; }

    </style>
</head>
<body class="relative h-screen w-screen">

    <canvas id="network-canvas"></canvas>

    <!-- Main Content Overlay -->
    <div class="absolute inset-0 z-10 flex flex-col items-center justify-center p-6 pointer-events-none">
        
        <!-- Header / Intro -->
        <div id="intro-panel" class="glass-panel p-8 max-w-2xl text-center pointer-events-auto transition-opacity duration-500">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 brand-font text-white">The Power of <span class="text-indigo-400">2</span></h1>
            <p class="text-slate-300 text-lg mb-6 leading-relaxed">
                What happens if you share this page with just <strong>2 friends</strong>? <br>
                And they share it with 2 of their friends?<br>
                <span class="text-sm text-slate-400 mt-2 block">Watch how 30 steps can reach the world.</span>
            </p>
            <button onclick="startFlowChart()" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-8 rounded-full shadow-lg shadow-indigo-500/30 transition transform hover:scale-105">
                VISUALIZE GLOBAL IMPACT
            </button>
        </div>

        <!-- Flow Chart Overlay -->
        <div id="flow-chart-panel" class="glass-panel p-8 w-full max-w-4xl opacity-0 pointer-events-none absolute transition-all duration-500 flex flex-col items-center justify-center">
            <h2 class="text-2xl font-bold text-white mb-10">How Viral Growth Works</h2>
            
            <!-- Fixed Coordinate Container for guaranteed alignment -->
            <div class="relative w-[600px] h-[380px]">
                
                <!-- SVG Layer for Paths with Arrow Markers -->
                <svg viewBox="0 0 600 380" class="absolute inset-0 w-full h-full pointer-events-none z-0">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
                        </marker>
                    </defs>
                    <!-- L0 -> L1 -->
                    <path id="path-0-L" d="M300,70 L170,135" class="connector-path" marker-end="url(#arrowhead)" />
                    <path id="path-0-R" d="M300,70 L430,135" class="connector-path" marker-end="url(#arrowhead)" />
                    
                    <!-- L1 -> L2 -->
                    <path id="path-1-LL" d="M150,180 L85,255" class="connector-path" marker-end="url(#arrowhead)" />
                    <path id="path-1-LR" d="M150,180 L215,255" class="connector-path" marker-end="url(#arrowhead)" />
                    <path id="path-1-RL" d="M450,180 L385,255" class="connector-path" marker-end="url(#arrowhead)" />
                    <path id="path-1-RR" d="M450,180 L515,255" class="connector-path" marker-end="url(#arrowhead)" />
                </svg>

                <!-- Icon Definition -->
                <svg id="person-icon" class="hidden" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>

                <!-- Level 0: You -->
                <div id="node-0" class="flow-node text-yellow-400" style="left: 300px; top: 40px;">
                    <svg><use href="#person-icon"/></svg>
                </div>
                <div id="lbl-0" class="label-text text-yellow-500 font-bold" style="left: 300px; top: 75px;">YOU</div>

                <!-- Level 1: 2 Friends -->
                <div id="node-1-L" class="flow-node text-indigo-400" style="left: 150px; top: 150px;">
                    <svg><use href="#person-icon"/></svg>
                </div>
                <div id="node-1-R" class="flow-node text-indigo-400" style="left: 450px; top: 150px;">
                    <svg><use href="#person-icon"/></svg>
                </div>
                
                <div id="lbl-1" class="label-text" style="left: 150px; top: 185px;">FRIEND 1</div>
                <div id="lbl-2" class="label-text" style="left: 450px; top: 185px;">FRIEND 2</div>

                <!-- Level 2: 4 More -->
                <div id="node-2-1" class="flow-node text-indigo-300" style="left: 75px; top: 275px;">
                    <svg style="width: 30px; height: 30px;"><use href="#person-icon"/></svg>
                </div>
                <div id="node-2-2" class="flow-node text-indigo-300" style="left: 225px; top: 275px;">
                    <svg style="width: 30px; height: 30px;"><use href="#person-icon"/></svg>
                </div>
                <div id="node-2-3" class="flow-node text-indigo-300" style="left: 375px; top: 275px;">
                    <svg style="width: 30px; height: 30px;"><use href="#person-icon"/></svg>
                </div>
                <div id="node-2-4" class="flow-node text-indigo-300" style="left: 525px; top: 275px;">
                    <svg style="width: 30px; height: 30px;"><use href="#person-icon"/></svg>
                </div>

                <div id="lbl-end" class="label-text text-lg font-bold text-indigo-200 w-full" style="left: 300px; top: 340px;">
                    1 Share turns into 1 Billion in 30 steps.
                </div>
            </div>

            <button onclick="startSimulation()" id="btn-continue" class="mt-6 bg-white text-indigo-900 font-bold py-3 px-10 rounded-full opacity-0 pointer-events-none transition-all hover:bg-indigo-50 shadow-lg transform hover:scale-105 active:scale-95">
                VISUALIZE GLOBALLY &rarr;
            </button>
        </div>

        <!-- Simulation HUD (Hidden Initially) -->
        <div id="sim-hud" class="glass-panel p-6 w-full max-w-4xl opacity-0 pointer-events-none transition-opacity duration-500 flex flex-col md:flex-row justify-between items-center mt-auto mb-10 mx-4">
            
            <div class="text-center md:text-left mb-4 md:mb-0">
                <div class="text-xs text-slate-400 uppercase tracking-widest">Generation</div>
                <div id="gen-count" class="text-3xl font-bold text-white">0 / 30</div>
            </div>

            <div class="text-center">
                <div class="text-xs text-slate-400 uppercase tracking-widest">People Reached</div>
                <div id="people-count" class="counter-val text-5xl font-bold">1</div>
            </div>

            <div class="text-center md:text-right mt-4 md:mt-0">
                <div class="text-xs text-slate-400 uppercase tracking-widest">Scope</div>
                <div id="status-text" class="text-xl text-indigo-300 font-bold">Local</div>
            </div>

        </div>

        <!-- Final Call to Action -->
        <div id="cta-panel" class="glass-panel p-8 max-w-lg text-center absolute opacity-0 pointer-events-none transform scale-90 transition-all duration-500">
            <h2 class="text-3xl font-bold text-white mb-2">1 Billion+ Reached.</h2>
            <p class="text-slate-300 mb-6">
                It only took <strong>30 steps</strong>.
                <br>
                You are Step 1. Start the chain reaction now.
            </p>
            
            <button onclick="sharePage()" class="relative pulse-ring bg-gradient-to-r from-indigo-600 to-cyan-500 hover:from-indigo-500 hover:to-cyan-400 text-white font-bold py-4 px-10 rounded-full shadow-xl transition transform hover:scale-105 pointer-events-auto flex items-center justify-center mx-auto">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
                START THE CHAIN
            </button>
            <div id="share-feedback" class="text-green-400 text-xs mt-2 opacity-0 transition-opacity">Link Copied / Shared!</div>
        </div>

    </div>

    <script>
        const canvas = document.getElementById('network-canvas');
        const ctx = canvas.getContext('2d');
        
        // --- State ---
        let width, height, cx, cy;
        let globeRadius;
        let rotation = 0;
        let isSimulating = false;
        
        let generation = 0;
        let totalReached = 1;
        let displayReached = 1;
        const MAX_GEN = 30;

        let activeBeams = [];
        let activeNodes = [];
        
        // --- Init ---
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            cx = width / 2;
            cy = height / 2;
            globeRadius = Math.min(width, height) * 0.35;
        }
        window.addEventListener('resize', resize);
        resize();

        // --- Logic ---
        
        function startFlowChart() {
            document.getElementById('intro-panel').classList.add('opacity-0', 'pointer-events-none');
            const flowPanel = document.getElementById('flow-chart-panel');
            flowPanel.classList.remove('opacity-0', 'pointer-events-none');
            flowPanel.classList.add('pointer-events-auto');

            // --- Animation Sequence ---
            
            // 1. Show You
            setTimeout(() => {
                document.getElementById('node-0').classList.add('visible');
                document.getElementById('lbl-0').classList.add('visible');
            }, 100);
            
            // 2. Lines to Friends
            setTimeout(() => {
                document.getElementById('path-0-L').classList.add('draw');
                document.getElementById('path-0-R').classList.add('draw');
            }, 800);

            // 3. Show Friends
            setTimeout(() => {
                document.getElementById('node-1-L').classList.add('visible');
                document.getElementById('node-1-R').classList.add('visible');
                document.getElementById('lbl-1').classList.add('visible');
                document.getElementById('lbl-2').classList.add('visible');
            }, 1600);

            // 4. Lines to Next
            setTimeout(() => {
                ['path-1-LL', 'path-1-LR', 'path-1-RL', 'path-1-RR'].forEach(id => {
                    document.getElementById(id).classList.add('draw');
                });
            }, 2400);

            // 5. Show Next Level
            setTimeout(() => {
                ['node-2-1', 'node-2-2', 'node-2-3', 'node-2-4'].forEach(id => {
                    document.getElementById(id).classList.add('visible');
                });
            }, 3200);

            // 6. Final Label
            setTimeout(() => {
                document.getElementById('lbl-end').classList.add('visible');
                const btn = document.getElementById('btn-continue');
                btn.classList.remove('opacity-0', 'pointer-events-none');
                btn.classList.add('pointer-events-auto');
            }, 4000);
        }

        function startSimulation() {
            document.getElementById('flow-chart-panel').classList.add('opacity-0', 'pointer-events-none');
            document.getElementById('sim-hud').classList.remove('opacity-0');
            
            generation = 0;
            totalReached = 1;
            displayReached = 1;
            activeNodes = [];
            activeBeams = [];

            isSimulating = true;
            loop();
            
            const startNode = createRandomNode(true); 
            activeNodes.push(startNode);
            
            setTimeout(runGenerationStep, 500);
        }

        function runGenerationStep() {
            if (!isSimulating) return;

            if (generation >= MAX_GEN) {
                endSimulation();
                return;
            }

            generation++;
            const newShares = Math.pow(2, generation);
            totalReached += newShares;
            
            document.getElementById('gen-count').innerText = `${generation} / ${MAX_GEN}`;
            
            let status = "Local Circle";
            if (generation > 5) status = "City / Region";
            if (generation > 10) status = "National";
            if (generation > 15) status = "International";
            if (generation > 20) status = "Continental";
            if (generation > 25) status = "Global Saturation";
            document.getElementById('status-text').innerText = status;

            const beamCount = Math.min(newShares, 25); 
            
            for(let i=0; i<beamCount; i++) {
                const source = activeNodes.length > 0 ? activeNodes[Math.floor(Math.random() * activeNodes.length)] : createRandomNode(true);
                const target = createRandomNode(false, generation); 
                activeBeams.push(new Beam(source, target));
                activeNodes.push(target);
                if (activeNodes.length > 600) activeNodes.shift();
            }
            
            const delay = Math.max(200, 1500 - (generation * 40));
            setTimeout(runGenerationStep, delay);
        }

        function endSimulation() {
            isSimulating = false;
            setTimeout(() => {
                const cta = document.getElementById('cta-panel');
                cta.classList.remove('opacity-0', 'pointer-events-none', 'scale-90');
                cta.classList.add('scale-100');
            }, 1000);
        }

        function createRandomNode(frontFacing = false, genSpread = 0) {
            let lat, lon;
            if (frontFacing) {
                lat = (Math.random() - 0.5) * 0.5;
                lon = -rotation + (Math.random() - 0.5) * 0.5; 
            } else {
                lat = Math.acos(2 * Math.random() - 1) - Math.PI/2;
                lon = Math.random() * Math.PI * 2;
            }
            return { lat, lon, color: getColorForGen(generation) };
        }

        function getColorForGen(g) {
            if (g < 10) return '#60a5fa'; 
            if (g < 20) return '#2dd4bf'; 
            if (g < 28) return '#c084fc'; 
            return '#facc15'; 
        }

        class Beam {
            constructor(start, end) {
                this.start = start;
                this.end = end;
                this.progress = 0;
                this.speed = 0.02 + Math.random() * 0.04;
                this.dead = false;
            }
            update() {
                this.progress += this.speed;
                if (this.progress >= 1) this.dead = true;
            }
        }

        function project(lat, lon, radius) {
            const rotLon = lon + rotation;
            const x = radius * Math.cos(lat) * Math.sin(rotLon);
            const y = radius * Math.sin(lat);
            const z = radius * Math.cos(lat) * Math.cos(rotLon);
            return { x: cx + x, y: cy + y, z: z, visible: z > 0 }; 
        }

        function drawGlobe() {
            ctx.beginPath();
            ctx.arc(cx, cy, globeRadius, 0, Math.PI*2);
            ctx.fillStyle = '#0f172a';
            ctx.fill();
            
            const grad = ctx.createRadialGradient(cx, cy, globeRadius * 0.8, cx, cy, globeRadius * 1.2);
            grad.addColorStop(0, 'rgba(59, 130, 246, 0.1)');
            grad.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = grad;
            ctx.fill();
            
            ctx.strokeStyle = '#1e293b';
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        function loop() {
            if(!isSimulating && totalReached === 1) return;
            requestAnimationFrame(loop);
            
            ctx.clearRect(0, 0, width, height);
            rotation += 0.005;
            
            if (displayReached < totalReached) {
                const diff = totalReached - displayReached;
                displayReached += Math.max(1, Math.ceil(diff * 0.1));
                document.getElementById('people-count').innerText = displayReached.toLocaleString();
            }

            drawGlobe();

            activeBeams = activeBeams.filter(b => !b.dead);

            activeBeams.forEach((b) => {
                b.update();
                const p1 = project(b.start.lat, b.start.lon, globeRadius);
                const p2 = project(b.end.lat, b.end.lon, globeRadius);
                
                if (p1.z < -50 && p2.z < -50) return; 

                const midLat = (b.start.lat + b.end.lat) / 2;
                const midLon = (b.start.lon + b.end.lon) / 2;
                const dist = Math.abs(b.start.lat - b.end.lat) + Math.abs(b.start.lon - b.end.lon); 
                const alt = globeRadius + (dist * 50); 
                const cp = project(midLat, midLon, alt);

                const t = b.progress;
                const tx = (1-t)*(1-t)*p1.x + 2*(1-t)*t*cp.x + t*t*p2.x;
                const ty = (1-t)*(1-t)*p1.y + 2*(1-t)*t*cp.y + t*t*p2.y;
                
                const t0 = Math.max(0, t - 0.15);
                const tx0 = (1-t0)*(1-t0)*p1.x + 2*(1-t0)*t0*cp.x + t0*t0*p2.x;
                const ty0 = (1-t0)*(1-t0)*p1.y + 2*(1-t0)*t0*cp.y + t0*t0*p2.y;

                ctx.beginPath();
                ctx.moveTo(tx0, ty0);
                ctx.lineTo(tx, ty);
                ctx.strokeStyle = `rgba(147, 197, 253, ${1 - t})`;
                ctx.lineWidth = 2;
                ctx.stroke();
            });

            activeNodes.forEach(n => {
                const p = project(n.lat, n.lon, globeRadius);
                if (p.visible) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 1.5, 0, Math.PI*2);
                    ctx.fillStyle = n.color;
                    ctx.fill();
                }
            });
        }

        async function sharePage() {
            const shareData = {
                title: 'The Power of Exponential Growth',
                text: 'See how sharing this page with just 2 people can reach the world!',
                url: window.location.href
            };
            const fb = document.getElementById('share-feedback');
            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                    fb.innerText = "Thanks for starting the chain!";
                    fb.classList.remove('opacity-0');
                } catch (err) {}
            } else {
                try {
                    await navigator.clipboard.writeText(window.location.href);
                    fb.innerText = "Link copied to clipboard!";
                    fb.classList.remove('opacity-0');
                } catch (err) {
                    fb.innerText = "Could not copy link.";
                    fb.classList.remove('opacity-0');
                }
            }
        }
    </script>
</body>
</html>
