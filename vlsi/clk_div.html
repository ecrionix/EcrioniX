<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6672302762343789"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXZS8C1FLY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XXZS8C1FLY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock Divider Lab - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Orbitron:wght@500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #020617; color: #f8fafc; overflow: hidden; }
        .tech-font { font-family: 'Orbitron', sans-serif; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }

        .watermark {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 8rem; font-weight: 900; color: rgba(99, 102, 241, 0.03);
            pointer-events: none; user-select: none; z-index: 0;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px;
        }

        /* Tabs */
        .tab-btn {
            @apply px-4 py-2 text-xs font-bold rounded-lg transition-all border border-transparent text-slate-400 uppercase tracking-wider;
        }
        .tab-active {
            @apply bg-indigo-600 text-white border-indigo-500 shadow-lg shadow-indigo-500/30;
        }

        /* Schematic */
        .ff-box { fill: #1e293b; stroke: #94a3b8; stroke-width: 2; transition: all 0.2s; }
        .ff-active { stroke: #fbbf24; filter: drop-shadow(0 0 5px #fbbf24); }
        .wire { fill: none; stroke: #475569; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; transition: stroke 0.1s; }
        .wire-active { stroke: #fbbf24; filter: drop-shadow(0 0 3px #fbbf24); }
        .wire-clk { stroke: #ef4444; }
        .wire-clk-active { stroke: #ef4444; filter: drop-shadow(0 0 3px #ef4444); opacity: 1; }
        .wire-clk-low { opacity: 0.4; }

        .gate-text { font-family: 'JetBrains Mono', monospace; font-size: 10px; fill: #94a3b8; }
        .val-text { font-family: 'Orbitron', sans-serif; font-size: 12px; font-weight: bold; fill: #fff; }

        /* Waveform */
        .wave-canvas { background: #0b0f19; border: 1px solid #334155; border-radius: 6px; }

        input[type=range] { accent-color: #6366f1; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col relative">

    <div class="watermark">EcrioniX Logic</div>

    <!-- Header -->
    <nav class="border-b border-slate-800 bg-slate-900/80 px-6 py-4 flex justify-between items-center z-20">
        <div>
            <h1 class="text-2xl font-bold text-indigo-400 tech-font uppercase">CLOCK <span class="text-white">DIVIDER</span></h1>
            <p class="text-[10px] text-slate-500 uppercase tracking-widest font-bold">Frequency Synthesis & Counters</p>
        </div>
        
        <div class="flex bg-slate-950 p-1 rounded-xl border border-slate-800">
            <button onclick="switchView('theory')" id="btn-theory" class="tab-btn tab-active">Theory</button>
            <button onclick="switchView('lab')" id="btn-lab" class="tab-btn">Simulation</button>
        </div>

        <button onclick="window.history.back()" class="group flex items-center text-slate-400 hover:text-white transition bg-slate-800/80 px-4 py-2 rounded-lg border border-slate-700 hover:border-indigo-500">
            <span class="text-xs font-bold uppercase">Exit Lab</span>
        </button>
    </nav>

    <!-- Content -->
    <div class="flex-grow relative overflow-hidden">

        <!-- THEORY VIEW -->
        <div id="view-theory" class="absolute inset-0 z-10 overflow-y-auto p-8 flex justify-center">
            <div class="max-w-4xl w-full glass-panel p-10 prose">
                <h1>Clock Division Principles</h1>
                <p>
                    A Clock Divider creates a lower frequency clock signal ($f_{out}$) from a higher frequency source ($f_{in}$). This is fundamental in digital systems for generating timing signals, baud rates, and lower-power clock domains.
                </p>

                <h2>1. Divide-by-2 (Toggle Flip-Flop)</h2>
                <p>
                    The simplest divider connects the inverted output ($\overline{Q}$) of a D-Flip Flop back to its input ($D$).
                </p>
                <ul>
                    <li>On the first rising edge, if $Q=0$, then $\overline{Q}=1$, so the FF latches 1.</li>
                    <li>On the next rising edge, $Q=1$, so $\overline{Q}=0$, and the FF latches 0.</li>
                    <li><strong>Result:</strong> The output toggles once for every <em>two</em> input cycles.</li>
                </ul>
                <div class="bg-indigo-500/10 border-l-4 border-indigo-500 p-4 my-4 text-center">
                    \[ f_{out} = \frac{f_{in}}{2}, \quad T_{out} = 2 \times T_{in} \]
                </div>

                <h2>2. Divide-by-$2^n$ (Ripple Counter)</h2>
                <p>
                    By cascading flip-flops where the output of one drives the clock of the next, we create a binary counter. Each stage divides the frequency by 2.
                </p>
                <ul>
                    <li>Stage 1: Divide by 2</li>
                    <li>Stage 2: Divide by 4</li>
                    <li>Stage 3: Divide by 8</li>
                </ul>

                <h2>3. Divide-by-N (Mod-N Counter)</h2>
                <p>
                    To divide by an arbitrary integer $N$ (e.g., 3, 5, 10), we use a counter that counts from $0$ to $N-1$ and then resets.
                </p>
                <p>
                    <strong>Duty Cycle Note:</strong> Simple counters often produce pulses with non-50% duty cycles. Creating a perfect 50% duty cycle for odd numbers requires logic on both rising and falling edges of the source clock.
                </p>

                <div class="mt-8 text-center">
                    <button onclick="switchView('lab')" class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition shadow-lg shadow-indigo-500/20">Launch Simulator &rarr;</button>
                </div>
            </div>
        </div>

        <!-- LAB VIEW -->
        <div id="view-lab" class="absolute inset-0 z-0 opacity-0 pointer-events-none flex p-6 gap-6">
            
            <!-- Controls -->
            <div class="w-80 flex flex-col gap-4">
                <div class="glass-panel p-6">
                    <h2 class="text-indigo-400 font-bold mb-4 uppercase text-[10px] tracking-widest">Configuration</h2>
                    
                    <div class="space-y-6">
                        <!-- Mode Select -->
                        <div>
                            <span class="text-xs text-slate-300 font-bold block mb-2">Division Mode</span>
                            <div class="grid grid-cols-3 gap-2">
                                <button onclick="setMode('DIV2')" id="btn-div2" class="py-2 bg-indigo-600 text-white rounded border border-indigo-500 text-xs font-bold transition">/ 2</button>
                                <button onclick="setMode('DIV4')" id="btn-div4" class="py-2 bg-slate-800 text-slate-400 rounded border border-slate-700 text-xs font-bold transition hover:text-white">/ 4</button>
                                <button onclick="setMode('DIVN')" id="btn-divn" class="py-2 bg-slate-800 text-slate-400 rounded border border-slate-700 text-xs font-bold transition hover:text-white">/ N</button>
                            </div>
                        </div>

                        <!-- Divider N (Only for DivN) -->
                        <div id="ctrl-divn" class="hidden">
                            <div class="flex justify-between text-xs mb-2">
                                <span class="text-slate-300">Factor (N)</span>
                                <span id="val-n" class="font-mono text-white font-bold">3</span>
                            </div>
                            <input type="range" id="slider-n" min="2" max="16" step="1" value="3" class="w-full">
                        </div>

                        <!-- Clock Speed -->
                        <div>
                            <div class="flex justify-between text-xs mb-2">
                                <span class="text-slate-300">Input Frequency</span>
                                <span id="val-freq" class="font-mono text-white font-bold">1 Hz</span>
                            </div>
                            <input type="range" id="slider-freq" min="0.5" max="5" step="0.5" value="1" class="w-full">
                        </div>

                        <button onclick="resetSim()" class="w-full py-2 bg-red-900/30 text-red-400 border border-red-800 rounded text-xs font-bold hover:bg-red-900/50">RESET COUNTERS</button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="glass-panel p-6 flex-grow">
                    <h2 class="text-emerald-400 font-bold mb-4 uppercase text-[10px] tracking-widest">Signal Stats</h2>
                    <div class="space-y-3">
                        <div class="bg-black/40 p-3 rounded border border-slate-800">
                            <div class="text-[10px] text-slate-500 uppercase">Input Period</div>
                            <div id="stat-tin" class="text-white font-mono font-bold">1000 ms</div>
                        </div>
                        <div class="bg-black/40 p-3 rounded border border-slate-800">
                            <div class="text-[10px] text-slate-500 uppercase">Output Period</div>
                            <div id="stat-tout" class="text-emerald-400 font-mono font-bold">2000 ms</div>
                        </div>
                        <div class="bg-black/40 p-3 rounded border border-slate-800">
                            <div class="text-[10px] text-slate-500 uppercase">Effective Ratio</div>
                            <div id="stat-ratio" class="text-indigo-400 font-mono font-bold">1 : 2</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visualization -->
            <div class="flex-grow flex flex-col gap-6">
                
                <!-- Schematic -->
                <div class="glass-panel p-1 relative flex-grow overflow-hidden flex items-center justify-center bg-slate-900/50">
                    <div class="absolute top-4 left-4 text-[10px] text-slate-500 font-bold uppercase tracking-widest bg-black/60 px-2 py-1 rounded">Circuit Schematic</div>
                    
                    <div id="schematic-container" class="w-full h-full flex items-center justify-center">
                        <svg id="svg-circuit" width="800" height="300" viewBox="0 0 800 300">
                            <defs>
                                <g id="ff-symbol">
                                    <rect x="0" y="0" width="60" height="80" class="ff-box" rx="4" />
                                    <text x="10" y="25" class="gate-text">D</text>
                                    <text x="40" y="25" class="gate-text">Q</text>
                                    <text x="40" y="70" class="gate-text">QÌ…</text>
                                    <path d="M0,60 L5,65 L0,70" fill="none" stroke="#94a3b8" /> <!-- Clk triangle -->
                                </g>
                            </defs>
                            
                            <!-- Dynamic Content Drawn by JS -->
                        </svg>
                    </div>
                </div>

                <!-- Waveforms -->
                <div class="glass-panel p-4 h-64 bg-gray-900 border border-slate-800 flex flex-col">
                    <div class="flex justify-between items-center mb-2 px-2">
                        <span class="text-[10px] font-bold text-slate-500 uppercase">Timing Diagram</span>
                        <div class="flex gap-4 text-[10px] font-mono">
                            <span class="text-red-400">CLK_IN</span>
                            <span class="text-green-400">CLK_OUT</span>
                        </div>
                    </div>
                    <div class="flex-grow relative bg-[#0b0f19] rounded overflow-hidden">
                        <canvas id="waveCanvas" class="w-full h-full"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- State ---
        let mode = 'DIV2'; // DIV2, DIV4, DIVN
        let divN = 3;
        let freq = 1.0;
        
        let simTime = 0;
        let clkState = 0;
        let counter = 0;
        let outState = 0;
        
        // For Div4
        let stage1 = 0;
        let stage2 = 0;

        let history = [];
        const MAX_HISTORY = 400;

        // DOM
        const sFreq = document.getElementById('slider-freq');
        const sN = document.getElementById('slider-n');
        const canvas = document.getElementById('waveCanvas');
        const ctx = canvas.getContext('2d');
        const svg = document.getElementById('svg-circuit');

        // --- Logic ---

        function switchView(v) {
            const theory = document.getElementById('view-theory');
            const lab = document.getElementById('view-lab');
            const btnT = document.getElementById('btn-theory');
            const btnL = document.getElementById('btn-lab');

            if (v === 'theory') {
                theory.classList.remove('opacity-0', 'pointer-events-none'); theory.classList.add('z-10');
                lab.classList.add('opacity-0', 'pointer-events-none'); lab.classList.remove('z-10');
                btnT.classList.add('tab-active'); btnL.classList.remove('tab-active');
            } else {
                lab.classList.remove('opacity-0', 'pointer-events-none'); lab.classList.add('z-10');
                theory.classList.add('opacity-0', 'pointer-events-none'); theory.classList.remove('z-10');
                btnL.classList.add('tab-active'); btnT.classList.remove('tab-active');
                drawSchematic();
            }
        }

        function setMode(m) {
            mode = m;
            document.getElementById('ctrl-divn').classList.toggle('hidden', m !== 'DIVN');
            
            ['DIV2','DIV4','DIVN'].forEach(id => {
                const btn = document.getElementById(`btn-${id.toLowerCase()}`);
                if(id === m) {
                    btn.classList.add('bg-indigo-600', 'text-white', 'border-indigo-500');
                    btn.classList.remove('bg-slate-800', 'text-slate-400');
                } else {
                    btn.classList.remove('bg-indigo-600', 'text-white', 'border-indigo-500');
                    btn.classList.add('bg-slate-800', 'text-slate-400');
                }
            });
            
            resetSim();
            drawSchematic();
        }

        sFreq.addEventListener('input', (e) => {
            freq = parseFloat(e.target.value);
            document.getElementById('val-freq').innerText = freq + " Hz";
        });

        sN.addEventListener('input', (e) => {
            divN = parseInt(e.target.value);
            document.getElementById('val-n').innerText = divN;
            resetSim();
        });

        function resetSim() {
            simTime = 0;
            clkState = 0;
            counter = 0;
            outState = 0;
            stage1 = 0; stage2 = 0;
            history = [];
        }

        // --- Step Logic ---
        function step() {
            simTime++;
            const periodFrames = 60 / freq; // base frames per cycle at 60fps assumption
            
            // Generate Input Clock
            const prevClk = clkState;
            clkState = (Math.floor(simTime / (periodFrames/2)) % 2);
            
            const risingEdge = (prevClk === 0 && clkState === 1);

            // Circuit Logic
            if (risingEdge) {
                if (mode === 'DIV2') {
                    // Toggle FF
                    outState = outState ? 0 : 1;
                    stage1 = outState; // Use stage1 var for FF state
                } 
                else if (mode === 'DIV4') {
                    // Ripple counter: FF1 toggles on clk. FF2 toggles on FF1 falling edge? 
                    // Let's do synchronous logic:
                    // 2-bit counter: 00 -> 01 -> 10 -> 11 -> 00
                    // MSB is divide by 4. LSB is divide by 2.
                    // Or Ripple: FF1 toggles. FF2 toggles when FF1 goes 1->0.
                    
                    // Simple synchronous implementation for stability in sim
                    stage1 = stage1 ? 0 : 1;
                    if (stage1 === 0) stage2 = stage2 ? 0 : 1; // Falling edge of stage 1 triggers stage 2
                    
                    outState = stage2;
                } 
                else if (mode === 'DIVN') {
                    counter++;
                    if (counter >= divN) counter = 0;
                    
                    // Generate 50% duty cycle for Even N, Pulse for Odd?
                    // Standard Counter MSB usually.
                    // Let's do: High if count < N/2.
                    outState = (counter < divN/2) ? 1 : 0;
                }
            }

            // Stats
            const tIn = (1000 / freq).toFixed(0);
            document.getElementById('stat-tin').innerText = tIn + " ms";
            
            let ratio = 2;
            if (mode === 'DIV4') ratio = 4;
            if (mode === 'DIVN') ratio = divN;
            
            document.getElementById('stat-tout').innerText = (tIn * ratio).toFixed(0) + " ms";
            document.getElementById('stat-ratio').innerText = `1 : ${ratio}`;

            // Visuals
            updateSchematicVisuals();
            
            // Waveform
            history.push({ clk: clkState, out: outState });
            if (history.length > MAX_HISTORY) history.shift();
            drawWaveforms();

            requestAnimationFrame(step);
        }

        // --- Visuals ---
        function drawSchematic() {
            // Clear current svg content except defs
            // Easier to just rebuild innerHTML or use groups
            // For simplicity, I'll clear a group
            // Let's construct based on mode
            
            let html = '';
            
            // Common Input
            html += `<text x="50" y="155" fill="#ef4444" font-size="12" font-weight="bold">CLK_IN</text>`;
            html += `<line x1="100" y1="150" x2="200" y2="150" class="wire" id="wire-clk-in" />`;

            if (mode === 'DIV2') {
                // Single FF
                html += `<g transform="translate(200, 110)">
                            <use href="#ff-symbol" id="ff-1"/>
                            <text x="30" y="45" fill="white" text-anchor="middle" font-size="14" id="txt-q1">0</text>
                            <text x="30" y="-10" fill="#64748b" text-anchor="middle" font-size="10">FF1 (/2)</text>
                         </g>`;
                // Feedback wire (Q_bar to D)
                html += `<path d="M240,180 V220 H180 V135 H200" class="wire" stroke-dasharray="4,4" id="wire-fb" />`;
                // Output
                html += `<line x1="260" y1="135" x2="400" y2="135" class="wire" id="wire-out" />`;
            } 
            else if (mode === 'DIV4') {
                // FF1
                html += `<g transform="translate(200, 110)">
                            <use href="#ff-symbol" id="ff-1"/>
                            <text x="30" y="45" fill="white" text-anchor="middle" font-size="14" id="txt-q1">0</text>
                            <text x="30" y="-10" fill="#64748b" text-anchor="middle" font-size="10">FF1 (/2)</text>
                         </g>`;
                // FF2
                html += `<g transform="translate(350, 110)">
                            <use href="#ff-symbol" id="ff-2"/>
                            <text x="30" y="45" fill="white" text-anchor="middle" font-size="14" id="txt-q2">0</text>
                            <text x="30" y="-10" fill="#64748b" text-anchor="middle" font-size="10">FF2 (/4)</text>
                         </g>`;
                
                // Feedback 1
                html += `<path d="M240,180 V200 H180 V135 H200" class="wire" stroke-dasharray="4,4" id="wire-fb1" />`;
                
                // Connect Q1 to Clk2 (Ripple)
                html += `<path d="M260,135 H300 V210 H350" class="wire" id="wire-ripple" />`; 
                // Wait, clock input is at y=65 relative to group, so abs y=175
                // Let's fix line to FF2 Clk input (x=350, y=175)
                
                // Redraw Ripple Connection: Q1(260,135) -> FF2_CLK(350,175)
                html += `<path d="M260,135 H320 V210 H340" class="wire" fill="none" />`; 
                // My FF symbol has clock at y=60 inside group -> 110+60 = 170.
                
                // Feedback 2
                html += `<path d="M390,180 V200 H330 V135 H350" class="wire" stroke-dasharray="4,4" id="wire-fb2" />`;

                // Output
                html += `<line x1="410" y1="135" x2="500" y2="135" class="wire" id="wire-out" />`;
            }
            else if (mode === 'DIVN') {
                 // Counter Block
                 html += `<rect x="250" y="100" width="100" height="100" fill="#1e293b" stroke="#64748b" stroke-width="2" rx="8" />`;
                 html += `<text x="300" y="140" fill="white" text-anchor="middle" font-size="14" font-weight="bold">MOD-${divN}</text>`;
                 html += `<text x="300" y="160" fill="#94a3b8" text-anchor="middle" font-size="10">COUNTER</text>`;
                 
                 // Count Value
                 html += `<text x="300" y="185" fill="#facc15" text-anchor="middle" font-family="monospace" font-size="16" id="txt-cnt">0</text>`;

                 // Wire In
                 html += `<line x1="200" y1="150" x2="250" y2="150" class="wire" id="wire-in-n" />`;
                 // Wire Out
                 html += `<line x1="350" y1="150" x2="450" y2="150" class="wire" id="wire-out" />`;
            }

            html += `<text x="${mode==='DIV4'?510:460}" y="155" fill="#4ade80" font-size="12" font-weight="bold">CLK_OUT</text>`;
            
            // Inject
            const container = document.getElementById('schematic-container');
            // We need to keep SVG tag and defs, so just append to a group or innerHTML of a group
            // Easier: Rebuild SVG string entirely or use a group inside existing SVG
            // I'll assume I have a group <g id="circuit-content"> in HTML
            // Let's modify the HTML structure slightly in next step if needed, 
            // but for now I'll just clear and redraw inside SVG using innerHTML (preserving defs is tricky with innerHTML on SVG)
            
            // Better: Create a group in HTML for dynamic content
            const dynGroup = document.getElementById('circuit-dynamic');
            if (dynGroup) dynGroup.innerHTML = html;
        }
        
        // Add dynamic group to SVG in HTML manually first
        // Wait, I need to edit the HTML body above to include <g id="circuit-dynamic">
        // I will do it via script for robustness here
        const existingSvg = document.getElementById('svg-circuit');
        if(!document.getElementById('circuit-dynamic')) {
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.id = "circuit-dynamic";
            existingSvg.appendChild(g);
        }

        function updateSchematicVisuals() {
            const wIn = document.getElementById('wire-clk-in');
            if (wIn) wIn.setAttribute('class', `wire ${clkState ? 'wire-clk-active' : 'wire-clk-low'}`);
            
            const wOut = document.getElementById('wire-out');
            if (wOut) wOut.setAttribute('class', `wire ${outState ? 'wire-active' : ''}`);

            // FF States
            if (mode === 'DIV2') {
                document.getElementById('txt-q1').textContent = stage1;
                document.getElementById('wire-fb').setAttribute('stroke', stage1 ? '#334155' : '#facc15'); // Inverse logic visual
            }
            if (mode === 'DIV4') {
                document.getElementById('txt-q1').textContent = stage1;
                document.getElementById('txt-q2').textContent = stage2;
                // Ripple wire active when Q1 is 1? Or carrying clock? It carries Q1 state.
                const ripple = document.getElementById('wire-ripple');
                // if (ripple) ripple.setAttribute('class', `wire ${stage1 ? 'wire-active' : ''}`);
            }
            if (mode === 'DIVN') {
                document.getElementById('txt-cnt').textContent = counter;
                const wInN = document.getElementById('wire-in-n');
                if (wInN) wInN.setAttribute('class', `wire ${clkState ? 'wire-clk-active' : 'wire-clk-low'}`);
            }
        }

        function drawWaveforms() {
            if(canvas.width !== canvas.parentElement.clientWidth) {
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
            }
            const w = canvas.width;
            const h = canvas.height;
            const step = w / MAX_HISTORY;

            ctx.clearRect(0,0,w,h);

            // Draw IN
            ctx.strokeStyle = '#ef4444';
            ctx.lineWidth = 2;
            ctx.beginPath();
            history.forEach((pt, i) => {
                const x = i * step;
                const y = pt.clk ? 30 : 60;
                if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            });
            ctx.stroke();

            // Draw OUT
            ctx.strokeStyle = '#4ade80';
            ctx.beginPath();
            history.forEach((pt, i) => {
                const x = i * step;
                const y = pt.out ? 100 : 130;
                if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            });
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#ef4444';
            ctx.fillText("CLK_IN", 10, 20);
            ctx.fillStyle = '#4ade80';
            ctx.fillText("CLK_OUT", 10, 90);
        }

        // Init
        setMode('DIV2');
        requestAnimationFrame(step);

    </script>
</body>
</html>
