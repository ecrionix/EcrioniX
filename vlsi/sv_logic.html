<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXZS8C1FLY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XXZS8C1FLY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SystemVerilog Data Types - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Orbitron:wght@500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #020617; color: #f8fafc; overflow: hidden; }
        .tech-font { font-family: 'Orbitron', sans-serif; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }

        /* Mobile Scroll Fix */
        @media (max-width: 1024px) { body { overflow-y: auto; } }

        .watermark {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 8rem; font-weight: 900; color: rgba(99, 102, 241, 0.03);
            pointer-events: none; user-select: none; z-index: 0;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px;
        }

        /* Tabs */
        .tab-btn {
            @apply px-4 py-2 text-xs font-bold rounded-lg transition-all border border-transparent text-slate-400 uppercase tracking-wider;
        }
        .tab-active {
            @apply bg-indigo-600 text-white border-indigo-500 shadow-lg shadow-indigo-500/30;
        }

        /* Bit Cells */
        .bit-box {
            width: 30px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid #334155; background: #0f172a;
            font-family: 'JetBrains Mono', monospace; font-weight: bold;
            transition: all 0.2s;
        }
        /* State Colors */
        .val-0 { color: #94a3b8; }
        .val-1 { color: #4ade80; background: rgba(74, 222, 128, 0.1); border-color: #4ade80; }
        .val-x { color: #f87171; background: rgba(248, 113, 113, 0.1); border-color: #f87171; animation: pulse-error 2s infinite; }
        .val-z { color: #fbbf24; background: rgba(251, 191, 36, 0.1); border-color: #fbbf24; }

        @keyframes pulse-error { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }

        /* Theory Styles */
        .prose h1 { @apply text-2xl md:text-3xl font-bold text-white mb-6 tech-font border-b border-slate-800 pb-2; }
        .prose h2 { @apply text-lg md:text-xl font-bold text-indigo-400 mt-8 mb-4 uppercase tracking-wider; }
        .prose p { @apply text-slate-400 mb-4 leading-relaxed text-sm md:text-base; }
        .prose code { @apply bg-slate-900 px-1 py-0.5 rounded text-indigo-300 font-mono text-xs; }
        .prose strong { @apply text-white font-semibold; }
        .prose ul { @apply list-disc list-inside space-y-2 text-slate-400 mb-4 text-sm md:text-base; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col relative">

    <div class="watermark">EcrioniX VLSI</div>

    <!-- Header -->
    <nav class="border-b border-slate-800 bg-slate-900/80 px-4 md:px-6 py-3 md:py-4 flex justify-between items-center z-20 sticky top-0 backdrop-blur-md">
        <div>
            <h1 class="text-xl md:text-2xl font-bold text-indigo-400 tech-font uppercase">System<span class="text-white">Verilog</span></h1>
            <p class="text-[9px] md:text-[10px] text-slate-500 uppercase tracking-widest font-bold hidden md:block">Data Types & Logic States</p>
        </div>
        
        <div class="flex bg-slate-950 p-1 rounded-xl border border-slate-800">
            <button onclick="switchView('theory')" id="btn-theory" class="tab-btn tab-active">Theory</button>
            <button onclick="switchView('lab')" id="btn-lab" class="tab-btn">Lab</button>
        </div>

        <button onclick="window.history.back()" class="group flex items-center text-slate-400 hover:text-white transition bg-slate-800/80 px-3 py-2 rounded-lg border border-slate-700 hover:border-indigo-500 ml-2">
            <span class="text-xs font-bold uppercase hidden md:inline">Exit Lab</span>
            <span class="text-xs font-bold uppercase md:hidden">Exit</span>
        </button>
    </nav>

    <!-- Content -->
    <div class="flex-grow relative overflow-y-auto lg:overflow-hidden">

        <!-- THEORY VIEW -->
        <div id="view-theory" class="absolute inset-0 z-10 overflow-y-auto p-4 md:p-8 flex justify-center">
            <div class="max-w-4xl w-full glass-panel p-6 md:p-10 prose mb-10">
                <h1>SystemVerilog Data Types</h1>
                <p>
                    SystemVerilog introduced a robust set of data types to bridge the gap between hardware description (Verilog) and high-level verification (C++/Java). Understanding these types is crucial for writing efficient RTL and effective Testbenches.
                </p>

                <h2>1. The 4-State Logic System</h2>
                <p>
                    Unlike standard software programming, hardware simulation requires modeling more than just 0 and 1. SystemVerilog uses a 4-state logic system:
                </p>
                <ul class="ml-4 border-l-2 border-indigo-500 pl-4">
                    <li><strong>0:</strong> Logic Zero (Ground / Low)</li>
                    <li><strong>1:</strong> Logic One (VCC / High)</li>
                    <li><strong>X:</strong> Unknown / Uninitialized / Contentious. Represents a bug or unassigned value in simulation.</li>
                    <li><strong>Z:</strong> High Impedance. Represents a disconnected wire or a tri-state buffer output.</li>
                </ul>

                <h2>2. The `logic` vs. `bit` Distinction</h2>
                <p>
                    This is the most common interview question in SV.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-4">
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <h3 class="text-indigo-400 font-bold mb-2">logic (4-State)</h3>
                        <p class="text-xs">
                            Can store 0, 1, X, and Z. It is the preferred type for <strong>RTL design</strong> and connecting modules because it can model X-propagation (bugs) and unconnected ports (Z). It replaces the confusing `reg` vs `wire` distinction in most cases.
                        </p>
                    </div>
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <h3 class="text-emerald-400 font-bold mb-2">bit (2-State)</h3>
                        <p class="text-xs">
                            Can only store 0 and 1. It is the preferred type for <strong>Testbench components</strong>, Transaction packets, and C-interface modeling. It is faster to simulate. <br>
                            <span class="text-red-400 font-bold">Warning:</span> If you assign X or Z to a `bit`, it silently converts to 0!
                        </p>
                    </div>
                </div>

                <h2>3. Integer Data Types</h2>
                <p>SystemVerilog adds C-like integer types for ease of verification:</p>
                <ul>
                    <li><strong>byte:</strong> 8-bit signed integer (-128 to 127).</li>
                    <li><strong>shortint:</strong> 16-bit signed integer.</li>
                    <li><strong>int:</strong> 32-bit signed integer.</li>
                    <li><strong>longint:</strong> 64-bit signed integer.</li>
                    <li><strong>time:</strong> 64-bit unsigned (for simulation time).</li>
                </ul>
                <p>
                    <strong>Signed vs Unsigned:</strong> Types like `byte` are signed by default. This causes "Overflow" to wrap around to negative numbers (e.g., 127 + 1 = -128). This behavior must be understood to avoid arithmetic bugs.
                </p>

                <div class="mt-8 text-center">
                    <button onclick="switchView('lab')" class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition shadow-lg shadow-indigo-500/20">Start Experiment &rarr;</button>
                </div>
            </div>
        </div>

        <!-- LAB VIEW -->
        <div id="view-lab" class="absolute inset-0 z-0 opacity-0 pointer-events-none flex flex-col lg:flex-row p-4 lg:p-6 gap-6 overflow-y-auto lg:overflow-hidden">
            
            <!-- SECTION 1: 4-State Logic Visualizer -->
            <div class="w-full lg:w-1/2 flex flex-col gap-4">
                <div class="glass-panel p-6 flex flex-col h-full">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-indigo-400 font-bold uppercase text-[10px] tracking-widest">State Logic Simulation</h2>
                        <div class="text-[10px] text-slate-500 font-mono">Assignment Test</div>
                    </div>

                    <!-- Input Controls -->
                    <div class="bg-slate-900/50 p-4 rounded-xl border border-slate-700 mb-6">
                        <p class="text-xs text-slate-400 mb-3">Select Value to Drive:</p>
                        <div class="grid grid-cols-4 gap-2">
                            <button onclick="driveVal('0')" class="py-3 bg-slate-800 border border-slate-600 rounded font-mono font-bold text-slate-300 hover:bg-slate-700 hover:text-white transition">0</button>
                            <button onclick="driveVal('1')" class="py-3 bg-green-900/30 border border-green-600 rounded font-mono font-bold text-green-400 hover:bg-green-900/50 transition">1</button>
                            <button onclick="driveVal('X')" class="py-3 bg-red-900/30 border border-red-600 rounded font-mono font-bold text-red-400 hover:bg-red-900/50 transition">X</button>
                            <button onclick="driveVal('Z')" class="py-3 bg-yellow-900/30 border border-yellow-600 rounded font-mono font-bold text-yellow-400 hover:bg-yellow-900/50 transition">Z</button>
                        </div>
                    </div>

                    <!-- Registers Display -->
                    <div class="space-y-6 flex-grow">
                        
                        <!-- Logic Type -->
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-xs font-bold text-indigo-300">logic [3:0] (4-State)</span>
                                <span class="text-[10px] text-slate-500">Preserves X/Z</span>
                            </div>
                            <div class="flex gap-1" id="reg-logic">
                                <div class="bit-box val-x">X</div><div class="bit-box val-x">X</div><div class="bit-box val-x">X</div><div class="bit-box val-x">X</div>
                            </div>
                        </div>

                        <!-- Bit Type -->
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-xs font-bold text-emerald-300">bit [3:0] (2-State)</span>
                                <span class="text-[10px] text-slate-500">Converts X/Z -> 0</span>
                            </div>
                            <div class="flex gap-1" id="reg-bit">
                                <div class="bit-box val-0">0</div><div class="bit-box val-0">0</div><div class="bit-box val-0">0</div><div class="bit-box val-0">0</div>
                            </div>
                        </div>
                        
                        <div class="bg-black/40 p-3 rounded border border-slate-700 mt-4">
                            <p id="state-log" class="text-xs text-slate-400 font-mono">> Initial State. Logic=X, Bit=0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: Data Width & Overflow -->
            <div class="w-full lg:w-1/2 flex flex-col gap-4">
                <div class="glass-panel p-6 flex flex-col h-full">
                    <h2 class="text-emerald-400 font-bold mb-6 uppercase text-[10px] tracking-widest">Integer Overflow Lab</h2>
                    
                    <div class="flex gap-2 mb-6 bg-slate-900 p-1 rounded-lg">
                        <button onclick="setType('byte')" id="btn-byte" class="flex-1 py-2 text-xs font-bold rounded bg-indigo-600 text-white shadow">byte (Signed)</button>
                        <button onclick="setType('ubyte')" id="btn-ubyte" class="flex-1 py-2 text-xs font-bold rounded text-slate-400 hover:text-white">bit [7:0] (Unsigned)</button>
                    </div>

                    <!-- Slider -->
                    <div class="mb-8">
                        <div class="flex justify-between text-xs mb-2 text-slate-400">
                            <span>0</span>
                            <span>127</span>
                            <span>255</span>
                        </div>
                        <input type="range" id="slider-val" min="0" max="255" value="127" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-indigo-500">
                    </div>

                    <!-- Visualization -->
                    <div class="flex flex-col items-center justify-center flex-grow space-y-6">
                        
                        <div class="text-center">
                            <div class="text-[10px] text-slate-500 uppercase font-bold mb-1">Stored Binary</div>
                            <div id="disp-binary" class="text-2xl font-mono text-white tracking-widest">01111111</div>
                        </div>

                        <div class="text-center w-full">
                            <div class="text-[10px] text-slate-500 uppercase font-bold mb-1">Interpreted Decimal</div>
                            <div id="disp-decimal" class="text-6xl font-black text-indigo-400 tech-font">127</div>
                            <div id="overflow-warning" class="text-xs text-red-500 font-bold mt-2 opacity-0 transition-opacity">⚠️ OVERFLOW / WRAP-AROUND</div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

    </div>

    <script>
        // --- View Switching ---
        function switchView(v) {
            const theory = document.getElementById('view-theory');
            const lab = document.getElementById('view-lab');
            const btnT = document.getElementById('btn-theory');
            const btnL = document.getElementById('btn-lab');

            if (v === 'theory') {
                theory.classList.remove('opacity-0', 'pointer-events-none'); theory.classList.add('z-10');
                lab.classList.add('opacity-0', 'pointer-events-none'); lab.classList.remove('z-10');
                btnT.classList.add('tab-active'); btnL.classList.remove('tab-active');
            } else {
                lab.classList.remove('opacity-0', 'pointer-events-none'); lab.classList.add('z-10');
                theory.classList.add('opacity-0', 'pointer-events-none'); theory.classList.remove('z-10');
                btnL.classList.add('tab-active'); btnT.classList.remove('tab-active');
            }
        }

        // --- Section 1: Logic State ---
        let currentRegLogic = ['X','X','X','X'];
        let currentRegBit = ['0','0','0','0'];

        function driveVal(val) {
            // Shift register effect
            currentRegLogic.pop();
            currentRegLogic.unshift(val);

            currentRegBit.pop();
            // Bit type converts X/Z to 0
            const bitVal = (val === 'X' || val === 'Z') ? '0' : val;
            currentRegBit.unshift(bitVal);

            updateRegVisuals();
            
            const logMsg = (val === 'X' || val === 'Z') 
                ? `> Driving '${val}'. Logic kept '${val}'. Bit forced '0'.`
                : `> Driving '${val}'. Both stored '${val}'.`;
            document.getElementById('state-log').innerText = logMsg;
        }

        function updateRegVisuals() {
            const logicContainer = document.getElementById('reg-logic');
            const bitContainer = document.getElementById('reg-bit');
            
            logicContainer.innerHTML = currentRegLogic.map(v => `<div class="bit-box val-${v.toLowerCase()}">${v}</div>`).join('');
            bitContainer.innerHTML = currentRegBit.map(v => `<div class="bit-box val-${v.toLowerCase()}">${v}</div>`).join('');
        }

        // --- Section 2: Integer Types ---
        let intType = 'byte'; // byte (signed), ubyte (unsigned)
        const slider = document.getElementById('slider-val');
        const dispBin = document.getElementById('disp-binary');
        const dispDec = document.getElementById('disp-decimal');
        const warn = document.getElementById('overflow-warning');

        function setType(t) {
            intType = t;
            const btnB = document.getElementById('btn-byte');
            const btnU = document.getElementById('btn-ubyte');
            
            if(t === 'byte') {
                btnB.className = "flex-1 py-2 text-xs font-bold rounded bg-indigo-600 text-white shadow transition";
                btnU.className = "flex-1 py-2 text-xs font-bold rounded text-slate-400 hover:text-white transition";
            } else {
                btnU.className = "flex-1 py-2 text-xs font-bold rounded bg-emerald-600 text-white shadow transition";
                btnB.className = "flex-1 py-2 text-xs font-bold rounded text-slate-400 hover:text-white transition";
            }
            updateIntVisuals();
        }

        slider.addEventListener('input', updateIntVisuals);

        function updateIntVisuals() {
            let rawVal = parseInt(slider.value); // 0 to 255
            
            // Binary string (always 8 bits)
            let binary = rawVal.toString(2).padStart(8, '0');
            // Add color to MSB to highlight sign bit importance
            let binHtml = `<span class="${intType==='byte' ? 'text-red-400 font-bold' : ''}">${binary[0]}</span>${binary.slice(1)}`;
            dispBin.innerHTML = binHtml;

            // Interpretation
            let interpretedVal = rawVal;
            let isOverflow = false;

            if (intType === 'byte') {
                // Signed 8-bit: -128 to 127
                // If rawVal > 127 (i.e., MSB is 1), it is negative
                if (rawVal > 127) {
                    interpretedVal = rawVal - 256; // Two's complement conversion
                    // Visual "Overflow" if user slid past 127
                    if (rawVal === 128) isOverflow = true; // Just crossed boundary
                }
            } else {
                // Unsigned: 0 to 255
                interpretedVal = rawVal;
            }

            dispDec.innerText = interpretedVal;
            
            // Visual feedback
            if (intType === 'byte' && rawVal > 127) {
                dispDec.classList.replace('text-indigo-400', 'text-red-400');
            } else {
                dispDec.classList.replace('text-red-400', 'text-indigo-400');
            }

            // Warning
            warn.style.opacity = (intType === 'byte' && rawVal > 127) ? 1 : 0;
            if(intType === 'byte' && rawVal > 127) {
                warn.innerText = "⚠️ INTERPRETED AS NEGATIVE (Signed Bit Set)";
            }
        }

        // Init
        updateRegVisuals();
        updateIntVisuals();

    </script>
</body>
</html>
