<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMOS Structure & Design - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .tech-font { font-family: 'Orbitron', sans-serif; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }
        
        /* Watermark */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 5rem;
            font-weight: 900;
            color: rgba(245, 158, 11, 0.05); /* Amber tint */
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
            z-index: 0;
        }

        /* Canvas & Containers */
        .lab-container {
            background-color: #1e1e1e;
            border: 2px solid #334155;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        /* Component Styling */
        .layer-poly { fill: #ef4444; stroke: #991b1b; stroke-width: 1; opacity: 0.8; } /* Red */
        .layer-ndiff { fill: #22c55e; stroke: #166534; stroke-width: 1; opacity: 0.6; } /* Green */
        .layer-pdiff { fill: #eab308; stroke: #854d0e; stroke-width: 1; opacity: 0.6; } /* Yellow */
        .layer-metal { fill: #3b82f6; stroke: #1e3a8a; stroke-width: 1; opacity: 0.7; } /* Blue */
        .layer-contact { fill: black; stroke: #cbd5e1; stroke-width: 1; }
        
        .substrate-p { fill: #475569; }
        .well-n { fill: #94a3b8; }
        .channel { fill: #facc15; opacity: 0; transition: opacity 0.3s; }

        /* Controls */
        .btn-tab {
            @apply px-4 py-2 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 border-transparent text-gray-500 hover:text-gray-300;
        }
        .btn-tab.active {
            @apply text-amber-500 border-amber-500;
        }

        .toggle-switch {
            @apply w-12 h-6 bg-slate-700 rounded-full relative cursor-pointer transition-colors;
        }
        .toggle-switch.active {
            @apply bg-amber-600;
        }
        .toggle-knob {
            @apply absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform;
        }
        .toggle-switch.active .toggle-knob {
            @apply translate-x-6;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex flex-col relative overflow-x-hidden">

    <div class="watermark">EcrioniX Labs</div>

    <!-- Navigation -->
    <div class="max-w-[1400px] mx-auto w-full flex justify-between items-start mb-6 relative z-10">
        <button onclick="window.history.back()" class="group flex items-center text-gray-500 hover:text-white transition bg-slate-900 px-4 py-2 rounded-full border border-slate-700">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            <span class="text-sm font-bold">EXIT LAB</span>
        </button>
        <div class="flex items-center space-x-2 bg-slate-800 px-4 py-2 rounded-full border border-slate-700">
            <span class="text-xs font-bold text-amber-500">VLSI / CMOS</span>
        </div>
    </div>

    <!-- Header -->
    <div class="max-w-[1400px] mx-auto w-full mb-8 relative z-10">
        <h1 class="text-3xl font-bold text-white tech-font">CMOS <span class="text-amber-500">STRUCTURE</span></h1>
        <p class="text-gray-400 text-sm mt-1">Interactive guide to MOSFET physics, Stick Diagrams, and Standard Cells.</p>
    </div>

    <!-- Tabs -->
    <div class="max-w-[1400px] mx-auto w-full mb-6 relative z-10 flex border-b border-slate-700">
        <button onclick="setTab('physics')" id="tab-physics" class="btn-tab active">1. MOSFET Physics</button>
        <button onclick="setTab('inverter')" id="tab-inverter" class="btn-tab">2. CMOS Inverter</button>
        <button onclick="setTab('stick')" id="tab-stick" class="btn-tab">3. Stick Diagrams</button>
    </div>

    <!-- Main Content Area -->
    <div class="max-w-[1400px] mx-auto w-full relative z-10">
        
        <!-- SECTION 1: MOSFET PHYSICS -->
        <div id="view-physics" class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8">
                <div class="lab-container h-80 flex items-center justify-center relative">
                    <div class="absolute top-2 left-2 text-[10px] text-gray-500 font-mono">CROSS-SECTION VIEW</div>
                    <svg id="mos-svg" width="600" height="300" viewBox="0 0 600 300">
                        <!-- Substrate (P-Type) -->
                        <rect x="50" y="150" width="500" height="100" class="substrate-p" />
                        <text x="300" y="200" text-anchor="middle" fill="#94a3b8" font-size="12">P-Substrate (Body)</text>

                        <!-- Source (N+) -->
                        <path d="M100,150 V200 H180 V150" class="layer-ndiff" />
                        <text x="140" y="180" text-anchor="middle" fill="white" font-weight="bold" font-size="12">n+</text>
                        <text x="140" y="140" text-anchor="middle" fill="#cbd5e1" font-size="12">Source</text>

                        <!-- Drain (N+) -->
                        <path d="M420,150 V200 H500 V150" class="layer-ndiff" />
                        <text x="460" y="180" text-anchor="middle" fill="white" font-weight="bold" font-size="12">n+</text>
                        <text x="460" y="140" text-anchor="middle" fill="#cbd5e1" font-size="12">Drain</text>

                        <!-- Channel (Invisible initially) -->
                        <rect id="channel-region" x="180" y="150" width="240" height="10" class="channel" />

                        <!-- Gate Oxide -->
                        <rect x="180" y="140" width="240" height="10" fill="#cbd5e1" />
                        
                        <!-- Gate (Poly) -->
                        <rect x="180" y="100" width="240" height="40" class="layer-poly" />
                        <text x="300" y="125" text-anchor="middle" fill="white" font-weight="bold">GATE (Poly)</text>

                        <!-- Terminals -->
                        <line x1="140" y1="150" x2="140" y2="80" stroke="#94a3b8" stroke-width="2" /> <!-- S -->
                        <line x1="460" y1="150" x2="460" y2="80" stroke="#94a3b8" stroke-width="2" /> <!-- D -->
                        <line x1="300" y1="100" x2="300" y2="60" stroke="#94a3b8" stroke-width="2" /> <!-- G -->
                        
                        <!-- Electrons Visual -->
                        <g id="electrons" opacity="0">
                            <circle cx="200" cy="155" r="3" fill="#facc15" />
                            <circle cx="250" cy="155" r="3" fill="#facc15" />
                            <circle cx="300" cy="155" r="3" fill="#facc15" />
                            <circle cx="350" cy="155" r="3" fill="#facc15" />
                            <circle cx="400" cy="155" r="3" fill="#facc15" />
                        </g>
                    </svg>
                </div>
            </div>
            <div class="lg:col-span-4 bg-slate-800 rounded-xl p-6 border border-slate-700">
                <h3 class="text-sm font-bold text-white mb-4 uppercase">NMOS Operation</h3>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="text-xs text-gray-400">Gate Voltage (Vgs)</span>
                            <span id="vgs-val" class="text-xs font-mono font-bold text-amber-400">0.0 V</span>
                        </div>
                        <input type="range" id="slider-vgs" min="0" max="3" step="0.1" value="0" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <p class="text-xs text-gray-400 leading-relaxed">
                        When <strong class="text-amber-400">Vgs > Vth</strong> (Threshold Voltage), positive charges on the gate repel holes in the P-substrate and attract electrons, forming an <strong>N-Channel</strong> (Inversion Layer) that allows current to flow.
                    </p>
                    <div class="p-3 bg-slate-900 rounded border border-slate-700 text-center">
                        <span class="text-[10px] text-gray-500 uppercase">Transistor State</span>
                        <div id="mos-state" class="text-red-400 font-bold mt-1">OFF (Cut-off)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: CMOS INVERTER -->
        <div id="view-inverter" class="grid grid-cols-1 lg:grid-cols-12 gap-8 hidden">
            <div class="lg:col-span-6">
                <div class="lab-container h-96 flex items-center justify-center p-4">
                    <!-- Schematic -->
                    <svg width="300" height="350" viewBox="0 0 300 350">
                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                <path d="M0,0 L10,5 L0,10" fill="#475569" />
                            </marker>
                        </defs>
                        
                        <!-- Rails -->
                        <line x1="50" y1="20" x2="250" y2="20" stroke="#ef4444" stroke-width="4" />
                        <text x="150" y="15" text-anchor="middle" fill="#ef4444" font-size="10">VDD (1)</text>
                        
                        <line x1="50" y1="330" x2="250" y2="330" stroke="#3b82f6" stroke-width="4" />
                        <text x="150" y="345" text-anchor="middle" fill="#3b82f6" font-size="10">GND (0)</text>

                        <!-- PMOS (Top) -->
                        <circle cx="115" cy="100" r="3" fill="none" stroke="#cbd5e1" stroke-width="2"/>
                        <line x1="100" y1="100" x2="50" y2="100" stroke="#cbd5e1" stroke-width="2" /> <!-- Gate Input -->
                        <line x1="120" y1="80" x2="120" y2="120" stroke="#cbd5e1" stroke-width="2" /> <!-- Gate Bar -->
                        <line x1="130" y1="80" x2="130" y2="20" stroke="#cbd5e1" stroke-width="2" id="path-pmos-src" /> <!-- Source to VDD -->
                        <line x1="130" y1="120" x2="130" y2="175" stroke="#cbd5e1" stroke-width="2" id="path-pmos-drn" /> <!-- Drain to Out -->
                        <text x="160" y="100" fill="#eab308" font-size="12">PMOS</text>

                        <!-- NMOS (Bottom) -->
                        <line x1="100" y1="250" x2="50" y2="250" stroke="#cbd5e1" stroke-width="2" /> <!-- Gate Input -->
                        <line x1="120" y1="230" x2="120" y2="270" stroke="#cbd5e1" stroke-width="2" /> <!-- Gate Bar -->
                        <line x1="130" y1="270" x2="130" y2="330" stroke="#cbd5e1" stroke-width="2" id="path-nmos-src" /> <!-- Source to GND -->
                        <line x1="130" y1="230" x2="130" y2="175" stroke="#cbd5e1" stroke-width="2" id="path-nmos-drn" /> <!-- Drain to Out -->
                        <text x="160" y="250" fill="#22c55e" font-size="12">NMOS</text>

                        <!-- Input Line -->
                        <line x1="50" y1="100" x2="50" y2="250" stroke="#cbd5e1" stroke-width="2" />
                        <line x1="50" y1="175" x2="20" y2="175" stroke="#cbd5e1" stroke-width="2" />
                        <text x="10" y="180" text-anchor="end" fill="white" font-weight="bold">IN</text>
                        <circle cx="50" cy="175" r="4" fill="white" />

                        <!-- Output Line -->
                        <line x1="130" y1="175" x2="250" y2="175" stroke="#cbd5e1" stroke-width="2" id="path-out" />
                        <text x="260" y="180" fill="white" font-weight="bold">OUT</text>
                        <circle cx="250" cy="175" r="4" fill="white" id="out-node" />
                    </svg>
                </div>
            </div>

            <div class="lg:col-span-6 flex flex-col justify-center space-y-6">
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <h3 class="text-sm font-bold text-white mb-4">LOGIC CONTROL</h3>
                    <div class="flex items-center space-x-4 mb-4">
                        <span class="text-gray-400 text-sm">Input A:</span>
                        <div class="toggle-switch" id="inv-switch" onclick="toggleInverter()">
                            <div class="toggle-knob"></div>
                        </div>
                        <span id="inv-in-val" class="font-mono text-white font-bold">0 (Low)</span>
                    </div>
                    
                    <div class="p-4 bg-slate-900 rounded border border-slate-700">
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="text-[10px] text-gray-500 uppercase">Pull-Up Network (PMOS)</div>
                                <div id="pun-status" class="text-green-400 font-bold text-sm">ON (Conducting)</div>
                            </div>
                            <div class="text-right">
                                <div class="text-[10px] text-gray-500 uppercase">Output</div>
                                <div id="inv-out-val" class="text-white font-bold text-xl">1</div>
                            </div>
                        </div>
                        <div class="h-px bg-slate-700 my-2"></div>
                        <div>
                            <div class="text-[10px] text-gray-500 uppercase">Pull-Down Network (NMOS)</div>
                            <div id="pdn-status" class="text-red-400 font-bold text-sm">OFF (Open)</div>
                        </div>
                    </div>
                </div>
                
                <p class="text-xs text-gray-400 leading-relaxed">
                    <strong>CMOS Principle:</strong> Complementary Metal-Oxide-Semiconductor. When input is 0, PMOS is ON (pulls Output to VDD). When input is 1, NMOS is ON (pulls Output to GND). They are never ON simultaneously (except briefly during switching), reducing static power.
                </p>
            </div>
        </div>

        <!-- SECTION 3: STICK DIAGRAMS -->
        <div id="view-stick" class="grid grid-cols-1 lg:grid-cols-12 gap-8 hidden">
            <div class="lg:col-span-8">
                <div class="lab-container h-96 flex items-center justify-center p-4 relative bg-[#000]">
                    <div class="absolute top-2 left-2 text-[10px] text-gray-500 font-mono">STICK DIAGRAM (INVERTER)</div>
                    
                    <svg width="400" height="300" viewBox="0 0 400 300">
                        <!-- VDD Rail (Metal) -->
                        <line x1="50" y1="40" x2="350" y2="40" stroke="#3b82f6" stroke-width="10" opacity="0.8" />
                        <text x="360" y="45" fill="#3b82f6" font-size="12" font-weight="bold">VDD</text>

                        <!-- GND Rail (Metal) -->
                        <line x1="50" y1="260" x2="350" y2="260" stroke="#3b82f6" stroke-width="10" opacity="0.8" />
                        <text x="360" y="265" fill="#3b82f6" font-size="12" font-weight="bold">GND</text>

                        <!-- P-Diffusion (Yellow) -->
                        <rect x="100" y="70" width="100" height="40" class="layer-pdiff" />
                        <!-- N-Diffusion (Green) -->
                        <rect x="100" y="190" width="100" height="40" class="layer-ndiff" />

                        <!-- Poly (Red) - Crosses both Diffusions -->
                        <line x1="150" y1="60" x2="150" y2="240" stroke="#ef4444" stroke-width="8" opacity="0.9" />
                        <text x="140" y="55" fill="#ef4444" font-size="10">Poly (Input)</text>

                        <!-- Connections -->
                        <!-- PMOS Source to VDD -->
                        <line x1="120" y1="40" x2="120" y2="90" stroke="#3b82f6" stroke-width="4" />
                        <rect x="115" y="80" width="10" height="10" class="layer-contact" /> <!-- Contact -->
                        <rect x="115" y="35" width="10" height="10" class="layer-contact" />

                        <!-- NMOS Source to GND -->
                        <line x1="120" y1="210" x2="120" y2="260" stroke="#3b82f6" stroke-width="4" />
                        <rect x="115" y="210" width="10" height="10" class="layer-contact" />
                        <rect x="115" y="255" width="10" height="10" class="layer-contact" />

                        <!-- Drains connected to Output -->
                        <line x1="180" y1="90" x2="180" y2="210" stroke="#3b82f6" stroke-width="4" />
                        <rect x="175" y="80" width="10" height="10" class="layer-contact" /> <!-- PMOS Drain Contact -->
                        <rect x="175" y="210" width="10" height="10" class="layer-contact" /> <!-- NMOS Drain Contact -->
                        
                        <!-- Output Pin -->
                        <line x1="180" y1="150" x2="250" y2="150" stroke="#3b82f6" stroke-width="4" />
                        <text x="260" y="155" fill="#3b82f6" font-size="12">OUT</text>

                    </svg>

                    <!-- Legend -->
                    <div class="absolute bottom-4 left-4 bg-gray-900/80 p-2 rounded border border-gray-700 text-[10px]">
                        <div class="flex items-center mb-1"><div class="w-3 h-3 bg-red-500 mr-2 opacity-80"></div> Polysilicon</div>
                        <div class="flex items-center mb-1"><div class="w-3 h-3 bg-blue-500 mr-2 opacity-80"></div> Metal 1</div>
                        <div class="flex items-center mb-1"><div class="w-3 h-3 bg-yellow-500 mr-2 opacity-60"></div> P-Diffusion</div>
                        <div class="flex items-center"><div class="w-3 h-3 bg-green-500 mr-2 opacity-60"></div> N-Diffusion</div>
                    </div>
                </div>
            </div>
            
            <div class="lg:col-span-4 bg-slate-800 rounded-xl p-6 border border-slate-700">
                <h3 class="text-sm font-bold text-white mb-4">STICK DIAGRAM RULES</h3>
                <ul class="list-disc list-inside text-xs text-gray-400 space-y-3 leading-relaxed">
                    <li><strong>Crossing Rule:</strong> When <span class="text-red-400">Poly</span> crosses <span class="text-green-400">Diffusion</span>, a TRANSISTOR is formed.</li>
                    <li><strong>Blue Lines:</strong> Metal interconnects (M1). They do not form transistors when crossing other layers.</li>
                    <li><strong>Black Dots:</strong> Contacts/Vias are needed to connect different layers (e.g., Metal to Diffusion).</li>
                    <li><strong>Euler Path:</strong> For complex gates, finding a common Poly ordering allows shared diffusion regions, saving area.</li>
                </ul>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="mt-12 py-6 border-t border-gray-800 text-center relative z-10 bg-gray-900/80 backdrop-blur-sm">
        <p class="text-gray-400 font-semibold mb-1">Owned & Operated by Elangovan</p>
        <p class="text-slate-600 text-sm font-medium mt-2">Â© 2026 EcrioniX Labs</p>
    </footer>

    <script>
        // --- Tab Logic ---
        function setTab(tabName) {
            // Update Buttons
            document.querySelectorAll('.btn-tab').forEach(b => b.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');

            // Show Content
            document.getElementById('view-physics').classList.add('hidden');
            document.getElementById('view-inverter').classList.add('hidden');
            document.getElementById('view-stick').classList.add('hidden');
            document.getElementById(`view-${tabName}`).classList.remove('hidden');
        }

        // --- Physics Logic ---
        const sliderVgs = document.getElementById('slider-vgs');
        const vgsVal = document.getElementById('vgs-val');
        const mosState = document.getElementById('mos-state');
        const channelRegion = document.getElementById('channel-region');
        const electrons = document.getElementById('electrons');

        sliderVgs.addEventListener('input', (e) => {
            const v = parseFloat(e.target.value);
            vgsVal.innerText = v.toFixed(1) + " V";
            
            // Threshold Voltage Vth = 0.7V
            if (v > 0.7) {
                mosState.innerText = "ON (Inversion Layer)";
                mosState.className = "text-green-400 font-bold mt-1";
                channelRegion.style.opacity = 0.8;
                electrons.style.opacity = 1;
            } else {
                mosState.innerText = "OFF (Cut-off)";
                mosState.className = "text-red-400 font-bold mt-1";
                channelRegion.style.opacity = 0;
                electrons.style.opacity = 0;
            }
        });

        // --- Inverter Logic ---
        let invInput = 0;
        function toggleInverter() {
            invInput = invInput ? 0 : 1;
            
            // Update Toggle Visual
            const sw = document.getElementById('inv-switch');
            if(invInput) sw.classList.add('active');
            else sw.classList.remove('active');
            
            document.getElementById('inv-in-val').innerText = invInput ? "1 (High)" : "0 (Low)";
            
            // Logic
            // In = 1 -> NMOS ON, PMOS OFF -> Out = 0
            // In = 0 -> NMOS OFF, PMOS ON -> Out = 1
            const out = invInput ? 0 : 1;
            document.getElementById('inv-out-val').innerText = out;
            
            // Color Paths
            const pSrc = document.getElementById('path-pmos-src');
            const pDrn = document.getElementById('path-pmos-drn');
            const nSrc = document.getElementById('path-nmos-src');
            const nDrn = document.getElementById('path-nmos-drn');
            const pOut = document.getElementById('path-out');
            const outNode = document.getElementById('out-node');

            if (invInput === 0) {
                // PMOS Path Active (Red/High)
                document.getElementById('pun-status').innerText = "ON (Conducting)";
                document.getElementById('pun-status').className = "text-green-400 font-bold text-sm";
                document.getElementById('pdn-status').innerText = "OFF (Open)";
                document.getElementById('pdn-status').className = "text-red-400 font-bold text-sm";

                pSrc.setAttribute('stroke', '#ef4444');
                pDrn.setAttribute('stroke', '#ef4444');
                pOut.setAttribute('stroke', '#ef4444');
                outNode.setAttribute('fill', '#ef4444');
                
                nSrc.setAttribute('stroke', '#334155');
                nDrn.setAttribute('stroke', '#334155');
            } else {
                // NMOS Path Active (Blue/Low)
                document.getElementById('pun-status').innerText = "OFF (Open)";
                document.getElementById('pun-status').className = "text-red-400 font-bold text-sm";
                document.getElementById('pdn-status').innerText = "ON (Conducting)";
                document.getElementById('pdn-status').className = "text-green-400 font-bold text-sm";

                nSrc.setAttribute('stroke', '#3b82f6');
                nDrn.setAttribute('stroke', '#3b82f6');
                pOut.setAttribute('stroke', '#3b82f6');
                outNode.setAttribute('fill', '#3b82f6');
                
                pSrc.setAttribute('stroke', '#334155');
                pDrn.setAttribute('stroke', '#334155');
            }
        }

        // Init
        setTab('physics');

    </script>
</body>
</html>
