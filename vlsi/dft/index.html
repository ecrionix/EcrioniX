<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6672302762343789"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXZS8C1FLY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XXZS8C1FLY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DFT Scan Chain Visualizer - EcrioniX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .tech-font { font-family: 'Orbitron', sans-serif; }
        .code-font { font-family: 'JetBrains Mono', monospace; }
        
        /* Watermark */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 8rem;
            font-weight: 900;
            color: rgba(99, 102, 241, 0.04);
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
            z-index: 0;
        }

        /* Circuit Components */
        .comp-body { fill: #1e293b; stroke: #94a3b8; stroke-width: 2; transition: all 0.3s; }
        .comp-text { font-family: 'Orbitron', sans-serif; fill: #cbd5e1; font-size: 10px; }
        
        .mux-shape { fill: #334155; stroke: #64748b; stroke-width: 2; }
        .logic-cloud { fill: #1e293b; stroke: #64748b; stroke-width: 2; stroke-dasharray: 4,2; }

        /* Wires */
        .wire { fill: none; stroke: #475569; stroke-width: 3; transition: all 0.3s; stroke-linecap: round; }
        .wire-active { stroke: #facc15; filter: drop-shadow(0 0 3px #facc15); opacity: 1; }
        .wire-inactive { stroke: #334155; opacity: 0.3; }
        
        /* Signal Nodes */
        .node-val { font-family: 'JetBrains Mono', monospace; font-size: 12px; font-weight: bold; fill: white; }
        .node-circle { fill: #0f172a; stroke: #94a3b8; stroke-width: 1; }

        /* Controls */
        .btn-ctrl { transition: all 0.1s; }
        .btn-ctrl:active { transform: translateY(2px); }

        /* Mode Indicator */
        .mode-badge {
            transition: all 0.3s;
        }
        .mode-scan { background-color: #f59e0b; color: black; border-color: #d97706; }
        .mode-func { background-color: #3b82f6; color: white; border-color: #2563eb; }

    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex flex-col relative overflow-x-hidden">

    <div class="watermark">EcrioniX Labs</div>

    <div class="max-w-[1400px] mx-auto w-full flex-grow relative z-10">
        
        <!-- Navigation -->
        <div class="flex justify-between items-start mb-2">
            <button onclick="window.history.back()" class="group flex items-center text-gray-500 hover:text-white transition-colors duration-200">
                <div class="w-8 h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center group-hover:border-indigo-500 group-hover:bg-indigo-900/20 mr-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                </div>
                <span class="text-sm font-bold tracking-wide group-hover:text-indigo-400">EXIT LAB</span>
            </button>
        </div>

        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 border-b border-gray-700 pb-4">
            <div>
                <h1 class="text-3xl font-bold text-white tech-font tracking-wide">DFT <span class="text-indigo-500 text-sm align-top">SCAN CHAINS</span></h1>
                <p class="text-gray-400 text-sm">Design For Testability: Internal Scan Architecture</p>
            </div>
            
            <div class="mt-4 md:mt-0 flex items-center space-x-4">
                <div class="bg-gray-900 border border-gray-700 px-4 py-2 rounded-lg text-center">
                    <div class="text-[10px] text-gray-500 font-bold uppercase">Current Operation</div>
                    <div id="op-status" class="text-yellow-400 font-mono font-bold">SHIFTING</div>
                </div>
                <div id="mode-indicator" class="px-6 py-3 rounded-lg font-bold border-2 mode-scan text-sm shadow-lg">
                    TEST MODE (SE=1)
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <!-- LEFT: Controls & Info -->
            <div class="lg:col-span-4 space-y-6">
                
                <!-- Control Panel -->
                <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg">
                    <h2 class="text-sm font-bold text-white mb-6 uppercase tracking-wider flex items-center">
                        <svg class="w-4 h-4 mr-2 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                        Test Controller
                    </h2>

                    <!-- Mode Switch -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-xs text-gray-400 font-bold">SCAN ENABLE (SE)</label>
                            <span id="se-val" class="text-xs font-mono font-bold text-yellow-400">1 (Shift)</span>
                        </div>
                        <button onclick="toggleSE()" id="btn-se" class="w-full py-3 rounded-lg bg-yellow-600 hover:bg-yellow-500 text-black font-bold border-b-4 border-yellow-800 active:border-b-0 active:translate-y-1 transition-all">
                            TOGGLE MODE
                        </button>
                        <p class="text-[10px] text-gray-500 mt-2">
                            <span class="text-yellow-400">SE=1:</span> Connects FFs into a shift register (Test).<br>
                            <span class="text-blue-400">SE=0:</span> Connects FFs to logic clouds (Functional).
                        </p>
                    </div>

                    <!-- Input Data (SI) -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <label class="text-xs text-gray-400 font-bold">SCAN INPUT (SI)</label>
                            <span id="si-val" class="text-xs font-mono font-bold text-white px-2 py-1 bg-gray-700 rounded">0</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="setSI(0)" class="flex-1 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-mono border border-gray-600">0</button>
                            <button onclick="setSI(1)" class="flex-1 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-mono border border-gray-600">1</button>
                        </div>
                    </div>

                    <!-- Clock -->
                    <button onclick="pulseClock()" class="w-full py-4 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white font-bold border-b-4 border-indigo-800 active:border-b-0 active:translate-y-1 transition-all shadow-lg shadow-indigo-500/20">
                        APPLY CLOCK PULSE 
                    </button>
                </div>

                <!-- Step-by-Step Guide -->
                <div class="bg-gray-900/80 border border-gray-700 rounded-xl p-5">
                    <h3 class="text-xs font-bold text-gray-300 mb-3 uppercase">Standard DFT Procedure</h3>
                    <ol class="list-decimal list-inside text-xs text-gray-400 space-y-2 leading-relaxed">
                        <li><strong>Shift In:</strong> Set <span class="text-yellow-400">SE=1</span>. Pulse clock 3 times to load a test pattern (e.g., 101) into the chain.</li>
                        <li><strong>Capture:</strong> Set <span class="text-blue-400">SE=0</span>. Pulse clock <strong>once</strong>. The logic clouds process the pattern and save the result back to FFs.</li>
                        <li><strong>Shift Out:</strong> Set <span class="text-yellow-400">SE=1</span>. Pulse clock 3 times to read the result at <span class="text-green-400">SCAN OUT</span>.</li>
                        <li><strong>Compare:</strong> If output matches expected simulation, chip is good!</li>
                    </ol>
                </div>

            </div>

            <!-- RIGHT: Schematic -->
            <div class="lg:col-span-8">
                <div class="bg-gray-800 rounded-xl shadow-2xl border border-gray-700 p-1 h-[500px] flex flex-col relative">
                    <div class="absolute top-2 left-3 text-[10px] font-bold text-gray-500 tracking-widest">SCAN CHAIN SCHEMATIC</div>
                    
                    <div class="flex-grow bg-slate-900 rounded-lg mt-6 overflow-hidden relative flex items-center justify-center">
                        <svg id="schematic" width="100%" height="100%" viewBox="0 0 800 300">
                            <defs>
                                <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                    <path d="M0,0 L10,5 L0,10" fill="#475569" />
                                </marker>
                            </defs>

                            <!-- STAGE 1 -->
                            <g transform="translate(100, 100)">
                                <!-- MUX -->
                                <path d="M0,0 L20,10 V50 L0,60 Z" class="mux-shape" /> <!-- Mux Shape -->
                                <text x="5" y="35" class="comp-text text-[8px]" fill="white">MUX</text>
                                
                                <!-- FF -->
                                <rect x="30" y="10" width="40" height="40" class="comp-body" />
                                <text x="50" y="35" text-anchor="middle" class="comp-text font-bold" id="q1-val">0</text>
                                <text x="35" y="20" class="comp-text text-[6px]">D</text>
                                <text x="60" y="20" class="comp-text text-[6px]">Q</text>
                                <path d="M30,40 L35,45 L30,50" fill="none" stroke="#94a3b8" /> <!-- Clk -->

                                <!-- Logic Cloud (Above) -->
                                <path d="M20,-40 Q40,-60 60,-40 Q80,-60 100,-40 Q100,-20 80,0 Q60,20 40,0 Q20,-20 20,-40" class="logic-cloud" />
                                <text x="60" y="-25" text-anchor="middle" class="comp-text">LOGIC</text>
                            </g>

                            <!-- STAGE 2 -->
                            <g transform="translate(300, 100)">
                                <path d="M0,0 L20,10 V50 L0,60 Z" class="mux-shape" />
                                <rect x="30" y="10" width="40" height="40" class="comp-body" />
                                <text x="50" y="35" text-anchor="middle" class="comp-text font-bold" id="q2-val">0</text>
                                <path d="M30,40 L35,45 L30,50" fill="none" stroke="#94a3b8" />
                                <path d="M20,-40 Q40,-60 60,-40 Q80,-60 100,-40 Q100,-20 80,0 Q60,20 40,0 Q20,-20 20,-40" class="logic-cloud" />
                                <text x="60" y="-25" text-anchor="middle" class="comp-text">LOGIC</text>
                            </g>

                            <!-- STAGE 3 -->
                            <g transform="translate(500, 100)">
                                <path d="M0,0 L20,10 V50 L0,60 Z" class="mux-shape" />
                                <rect x="30" y="10" width="40" height="40" class="comp-body" />
                                <text x="50" y="35" text-anchor="middle" class="comp-text font-bold" id="q3-val">0</text>
                                <path d="M30,40 L35,45 L30,50" fill="none" stroke="#94a3b8" />
                                <path d="M20,-40 Q40,-60 60,-40 Q80,-60 100,-40 Q100,-20 80,0 Q60,20 40,0 Q20,-20 20,-40" class="logic-cloud" />
                                <text x="60" y="-25" text-anchor="middle" class="comp-text">LOGIC</text>
                            </g>

                            <!-- Wires & Connections -->
                            
                            <!-- SE Line (Common) -->
                            <line x1="50" y1="200" x2="600" y2="200" class="wire" id="wire-se-main" />
                            <text x="40" y="205" class="comp-text" fill="#facc15">SE</text>
                            <!-- SE Taps -->
                            <line x1="110" y1="200" x2="110" y2="60" class="wire" id="wire-se-1" />
                            <line x1="310" y1="200" x2="310" y2="60" class="wire" id="wire-se-2" />
                            <line x1="510" y1="200" x2="510" y2="60" class="wire" id="wire-se-3" />

                            <!-- SCAN PATH (SI -> Mux1 -> Q1 -> Mux2 -> Q2 -> Mux3 -> Q3 -> SO) -->
                            <!-- SI to Mux1 (Input 1 - Bottom) -->
                            <text x="20" y="150" class="comp-text" fill="white">SI</text>
                            <line x1="40" y1="145" x2="100" y2="145" class="wire" id="wire-si" /> 
                            
                            <!-- Q1 to Mux2 (Input 1 - Bottom) -->
                            <path d="M170,130 L200,130 L200,145 L300,145" class="wire" id="wire-scan-1" fill="none" />
                            
                            <!-- Q2 to Mux3 (Input 1 - Bottom) -->
                            <path d="M370,130 L400,130 L400,145 L500,145" class="wire" id="wire-scan-2" fill="none" />
                            
                            <!-- Q3 to SO -->
                            <line x1="570" y1="130" x2="650" y2="130" class="wire" id="wire-scan-3" />
                            <text x="660" y="135" class="comp-text" fill="#4ade80" font-size="14" font-weight="bold">SCAN OUT</text>

                            <!-- FUNCTIONAL PATH (Logic -> Mux Input 0 - Top) -->
                            <!-- Q1 to Logic2 -->
                            <path d="M170,130 L200,130 L200,100" class="wire" id="wire-func-1-in" fill="none" />
                            <!-- Logic2 to Mux2 (Top) -->
                            <path d="M360,100 L360,80 L300,80 L300,115" class="wire" id="wire-func-2-out" fill="none" /> <!-- Mux top input approx -->

                            <!-- Q2 to Logic3 -->
                            <path d="M370,130 L400,130 L400,100" class="wire" id="wire-func-2-in" fill="none" />
                            <!-- Logic3 to Mux3 -->
                            <path d="M560,100 L560,80 L500,80 L500,115" class="wire" id="wire-func-3-out" fill="none" />

                            <!-- Feedback/Input for Logic 1 (Dummy) -->
                            <line x1="160" y1="100" x2="160" y2="80" class="wire" />
                            <line x1="160" y1="80" x2="100" y2="80" class="wire" id="wire-func-1-out" /> <!-- To Mux1 Top -->

                        </svg>
                    </div>

                    <!-- Legend -->
                    <div class="bg-gray-900 border-t border-gray-700 px-4 py-2 flex space-x-6 text-[10px] text-gray-500">
                        <div class="flex items-center"><div class="w-3 h-1 bg-yellow-400 mr-2"></div> ACTIVE PATH</div>
                        <div class="flex items-center"><div class="w-3 h-1 bg-slate-700 mr-2"></div> INACTIVE PATH</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- State ---
        let regs = [0, 0, 0]; // Q1, Q2, Q3
        let si = 0;
        let se = 1; // 1 = Scan, 0 = Functional

        // DOM
        const modeIndicator = document.getElementById('mode-indicator');
        const opStatus = document.getElementById('op-status');
        const btnSE = document.getElementById('btn-se');
        const elSI = document.getElementById('si-val');
        
        const qEls = [
            document.getElementById('q1-val'),
            document.getElementById('q2-val'),
            document.getElementById('q3-val')
        ];

        // Wires
        const wiresScan = [
            document.getElementById('wire-si'),
            document.getElementById('wire-scan-1'),
            document.getElementById('wire-scan-2'),
            document.getElementById('wire-scan-3')
        ];

        const wiresFunc = [
            document.getElementById('wire-func-1-out'),
            document.getElementById('wire-func-2-out'),
            document.getElementById('wire-func-3-out'),
            document.getElementById('wire-func-1-in'),
            document.getElementById('wire-func-2-in')
        ];
        
        const wiresSE = [
            document.getElementById('wire-se-main'),
            document.getElementById('wire-se-1'),
            document.getElementById('wire-se-2'),
            document.getElementById('wire-se-3')
        ];

        function updateUI() {
            // Update Reg Values
            qEls.forEach((el, i) => el.innerText = regs[i]);
            elSI.innerText = si;

            // Update Mode Visuals
            if (se) {
                // SCAN MODE
                modeIndicator.innerText = "TEST MODE (SE=1)";
                modeIndicator.className = "px-6 py-3 rounded-lg font-bold border-2 mode-scan text-sm shadow-lg";
                btnSE.innerText = "SWITCH TO FUNCTIONAL MODE";
                opStatus.innerText = "SHIFTING DATA";
                opStatus.className = "text-yellow-400 font-mono font-bold";
                
                // Highlight Scan Paths
                wiresScan.forEach(w => w.classList.replace('wire-inactive', 'wire-active') || w.classList.add('wire-active'));
                wiresFunc.forEach(w => w.classList.replace('wire-active', 'wire-inactive') || w.classList.add('wire-inactive'));
                wiresSE.forEach(w => w.classList.add('wire-active'));

            } else {
                // FUNCTIONAL MODE
                modeIndicator.innerText = "FUNCTIONAL MODE (SE=0)";
                modeIndicator.className = "px-6 py-3 rounded-lg font-bold border-2 mode-func text-sm shadow-lg";
                btnSE.innerText = "SWITCH TO SCAN MODE";
                opStatus.innerText = "CAPTURING LOGIC";
                opStatus.className = "text-blue-400 font-mono font-bold";

                // Highlight Functional Paths
                wiresScan.forEach(w => w.classList.replace('wire-active', 'wire-inactive') || w.classList.add('wire-inactive'));
                wiresFunc.forEach(w => w.classList.replace('wire-inactive', 'wire-active') || w.classList.add('wire-active'));
                wiresSE.forEach(w => w.classList.remove('wire-active'));
            }
        }

        function toggleSE() {
            se = se ? 0 : 1;
            updateUI();
        }

        function setSI(val) {
            si = val;
            updateUI();
        }

        function pulseClock() {
            // Logic Simulation
            let nextRegs = [...regs];

            if (se) {
                // SHIFT REGISTER LOGIC
                // Q3 <= Q2
                // Q2 <= Q1
                // Q1 <= SI
                nextRegs[2] = regs[1];
                nextRegs[1] = regs[0];
                nextRegs[0] = si;
            } else {
                // COMBINATIONAL LOGIC (Inverted logic for demo visual variety)
                // Logic 1 (Input to Q1): Let's just say it inverts Q3 (Loop)
                nextRegs[0] = regs[2] ? 0 : 1; 
                
                // Logic 2 (Input to Q2): Inverts Q1
                nextRegs[1] = regs[0] ? 0 : 1;

                // Logic 3 (Input to Q3): Inverts Q2
                nextRegs[2] = regs[1] ? 0 : 1;
            }

            regs = nextRegs;
            updateUI();
        }

        // Init
        updateUI();

    </script>
</body>
</html>
